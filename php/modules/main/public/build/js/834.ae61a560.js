"use strict";(self["webpackChunkzmwk_session_archive"]=self["webpackChunkzmwk_session_archive"]||[]).push([[834],{53343:function(e,a,l){l.r(a),l.d(a,{default:function(){return h}});var r=l(56768),s=l(90144),t=l(81387),n=l(79907),o=l(17694),u=l(41824);const c={class:"zm-main-content account"};var i={__name:"account",setup(e){(0,t.rd)();const a=(0,s.KR)(null);let l=(e,l,r)=>{""===l?r(new Error("账号不能为空")):/^[a-zA-Z0-9]+$/.test(l)?l.length<6?r(new Error("账号最少6个字符")):l.length>32?r(new Error("账号最多32个字符")):(""!==p.checkPass&&a.value.validateFields("checkSetPass"),r()):r(new Error("账号只能包含英文和数字"))},i=(e,l,r)=>{""===l?r(new Error("密码不能为空")):/^[a-zA-Z0-9_`~!@#$%^&*()\-=_+\[\]{}|;':",.<>\/?]+$/.test(l)?l.length<6?r(new Error("密码最少6个字符")):l.length>32?r(new Error("密码最多32个字符")):(a.value.validateFields("checkSetPass"),r()):r(new Error("密码只能包含英文、数字、下划线以及键盘上的特殊符号"))},d=(e,a,l)=>{""===a?l(new Error("密码不能为空")):/^[a-zA-Z0-9_`~!@#$%^&*()\-=_+\[\]{}|;':",.<>\/?]+$/.test(a)?a.length<6?l(new Error("密码最少6个字符")):a.length>32?l(new Error("密码最多32个字符")):a!==p.pass?l(new Error("两次密码不一致")):l():l(new Error("密码只能包含英文、数字、下划线以及键盘上的特殊符号"))};const p=(0,s.Kh)({login:"",pass:"",checkPass:""}),h=(0,s.Kh)({login:[{required:!0,validator:l,trigger:"change"}],pass:[{required:!0,validator:i,trigger:"change"}],checkPass:[{required:!0,validator:d,trigger:"change"}]}),v=((0,s.Kh)({labelCol:{span:2},wrapperCol:{span:7}}),(0,s.KR)("")),g=(0,r.EW)((()=>v.value?p.login!=v.value?"":1:""));(0,r.sV)((()=>{k()}));const k=()=>{(0,u.HW)().then((e=>{e.data&&(p.login=e.data.account,v.value=JSON.parse(JSON.stringify(e.data.account)))}))},w=()=>{a.value.validate().then((e=>{if(!e)return!1;{let{login:e,pass:a,checkPass:l}=p,r={username:e,password:a,repeat_password:l};(0,u.$4)(r).then((e=>{"success"==e.status&&(o.Ay.success("操作成功"),p.pass="",p.checkPass=""),e.error_message&&o.Ay.error(e.error_message)}))}}))};return(e,l)=>{const s=(0,r.g2)("a-input"),t=(0,r.g2)("a-form-item"),o=(0,r.g2)("a-input-password"),u=(0,r.g2)("a-button"),i=(0,r.g2)("a-form");return(0,r.uX)(),(0,r.Wv)(n.A,{title:"账号管理"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",c,[l[5]||(l[5]=(0,r.Lk)("div",{class:"title"}," 请设置登录账号及密码 ",-1)),(0,r.bF)(i,{class:"mt24",ref_key:"ruleFormRef",ref:a,model:p,rules:h},{default:(0,r.k6)((()=>[(0,r.bF)(t,{name:"login",label:"登录账号"},{default:(0,r.k6)((()=>[(0,r.bF)(s,{placeholder:"请输入登录账号",value:p.login,"onUpdate:value":l[0]||(l[0]=e=>p.login=e),allowClear:""},null,8,["value"])])),_:1}),(0,r.bF)(t,{name:"pass",label:""!=g.value?"新密码":"设置密码"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{autocomplete:"",placeholder:""!=g.value?"请输入新密码":"请输入设置密码",value:p.pass,"onUpdate:value":l[1]||(l[1]=e=>p.pass=e),allowClear:""},null,8,["placeholder","value"])])),_:1},8,["label"]),(0,r.bF)(t,{name:"checkPass",label:""!=g.value?"确认新密码":"确认密码"},{default:(0,r.k6)((()=>[(0,r.bF)(o,{autocomplete:"",placeholder:""!=g.value?"再次输入新密码":"再次输入设置密码",value:p.checkPass,"onUpdate:value":l[2]||(l[2]=e=>p.checkPass=e),allowClear:""},null,8,["placeholder","value"])])),_:1},8,["label"]),(0,r.bF)(t,null,{default:(0,r.k6)((()=>[(0,r.bF)(u,{type:"primary",onClick:l[3]||(l[3]=e=>w()),style:{"margin-top":"24px","margin-left":"138px"}},{default:(0,r.k6)((()=>l[4]||(l[4]=[(0,r.eW)(" 保存 ")]))),_:1})])),_:1})])),_:1},8,["model","rules"])])])),_:1})}}},d=l(71241);const p=(0,d.A)(i,[["__scopeId","data-v-f79d6ca8"]]);var h=p}}]);