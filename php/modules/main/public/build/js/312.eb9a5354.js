"use strict";(self["webpackChunkzmwk_session_archive"]=self["webpackChunkzmwk_session_archive"]||[]).push([[312],{93992:function(e,s,a){a.r(s),a.d(s,{default:function(){return I}});a(44114);var i=a(56768),o=a(24232),t=a.p+"img/login-cover.0318de32.svg",l=a.p+"img/login-tips-triangle.820b7e53.svg",n=a.p+"img/user-login.02b72bf8.svg",c=a.p+"img/wx-login.ffa6bfb6.svg",r=a.p+"img/user.0bfc1f2a.svg",g=a.p+"img/password.229c5385.svg",u=a(90144),p=a(81387),d=a(60782),m=a(43834),k=a(15374),v=a(41824),h=(a(65067),a(31419),a(8298));const b={class:"_main-container"},_={class:"main-content"},f={class:"left-box"},w={class:"web-logo-title-box"},L={class:"web-logo-title"},y={class:"web-logo-info"},x={key:0,class:"right-box"},C={class:"right-icon-box"},F={key:1,class:"right-box"},W={class:"right-icon-box"},A={class:"sign-in"};var z={__name:"login",setup(e){const{proxy:s}=(0,i.nI)(),a=(0,p.rd)(),z=(0,d.Pj)(),E=(0,i.EW)((()=>z.getters.getCompany)),$=(0,u.KR)(!0),I=(0,u.KR)(!1),K=(0,u.Kh)({username:"",password:"",remember:!0});(0,i.sV)((async()=>{}));const X=e=>{"wx"===e?(I.value=!0,R()):I.value=!1},q=()=>{P()},P=()=>{(0,v.mD)({username:K.username,password:K.password}).then((e=>{T(e.data.token)})).catch((e=>{}))},R=()=>{(0,v.hY)().then((e=>{if(e?.data?.init){let{corp_id:s,agent_id:a}=e.data;S(s,a)}else s.$message.warning("企业信息不存在，请先注册企业信息！"),setTimeout((()=>{a.push({path:"/authorizedAccess/index"})}),1e3)})).finally((()=>{$.value=!1}))},S=async(e,a)=>{try{ww.createWWLoginPanel({el:"#ww_login",params:{login_type:"CorpApp",appid:e,agentid:a,redirect_uri:window.location.origin,state:"loginState",redirect_type:"callback"},onCheckWeComLogin({isWeComLogin:e}){},onLoginSuccess({code:s}){(0,v.w4)({corp_id:e,code:s}).then((e=>{T(e.data.token)}))},onLoginFail(e){}})}catch(i){s.$message.error("初始化登录失败！")}},T=async e=>{try{const{corpInfo:i}=await(0,h.u)(e);s.$message.success("登录成功，正在跳转主页"),setTimeout((()=>{i.data?.chat_public_key_version>0?a.push({path:"/"}):a.push({path:"/authorizedAccess/guide"})}),1e3)}catch(i){s.$message.error("登录失败")}};return(e,s)=>{const a=(0,i.g2)("a-input"),u=(0,i.g2)("a-form-item"),p=(0,i.g2)("a-input-password"),d=(0,i.g2)("a-button"),v=(0,i.g2)("a-form");return(0,i.uX)(),(0,i.CE)("div",b,[(0,i.bF)(m.A),(0,i.Lk)("div",_,[(0,i.Lk)("div",f,[s[4]||(s[4]=(0,i.Lk)("img",{src:t,class:"cover"},null,-1)),(0,i.Lk)("div",w,[(0,i.Lk)("div",L,(0,o.v_)(E.value.login_page_title||"芝麻会话存档"),1),(0,i.Lk)("div",y,(0,o.v_)(E.value.login_page_description||"助力企业客户沟通合规管控和质量提升"),1)])]),I.value?((0,i.uX)(),(0,i.CE)("div",x,[(0,i.Lk)("div",C,[s[5]||(s[5]=(0,i.Lk)("div",{class:"login-tip-top"},[(0,i.eW)(" 使用密码登录 "),(0,i.Lk)("img",{class:"login-tip-top-icon",src:l})],-1)),(0,i.Lk)("img",{class:"right-check",src:n,onClick:s[0]||(s[0]=e=>X("account"))})]),s[6]||(s[6]=(0,i.Lk)("div",{id:"ww_login"},null,-1))])):((0,i.uX)(),(0,i.CE)("div",F,[(0,i.Lk)("div",W,[s[7]||(s[7]=(0,i.Lk)("div",{class:"login-tip-top"},[(0,i.eW)(" 扫码登录更便捷 "),(0,i.Lk)("img",{class:"login-tip-top-icon",src:l})],-1)),(0,i.Lk)("img",{class:"right-check",src:c,onClick:s[1]||(s[1]=e=>X("wx"))})]),(0,i.Lk)("div",A,[s[12]||(s[12]=(0,i.Lk)("h2",{class:"login-title"},"密码登录",-1)),(0,i.bF)(v,{class:"login-form",model:K,name:"basic",autocomplete:"off",onFinish:q},{default:(0,i.k6)((()=>[(0,i.bF)(u,{name:"username",class:"usernames",rules:[{required:!0,message:"请输入账号"}]},{default:(0,i.k6)((()=>[(0,i.bF)(a,{class:"login-item",value:K.username,"onUpdate:value":s[2]||(s[2]=e=>K.username=e),autocomplete:"off",placeholder:"请输入账号"},{prefix:(0,i.k6)((()=>s[8]||(s[8]=[(0,i.Lk)("img",{class:"login-input-icon",src:r},null,-1)]))),_:1},8,["value"])])),_:1}),(0,i.bF)(u,{name:"password",rules:[{required:!0,message:"请输入密码"}]},{default:(0,i.k6)((()=>[(0,i.bF)(p,{class:"login-item",value:K.password,"onUpdate:value":s[3]||(s[3]=e=>K.password=e),autocomplete:"off",type:"password",placeholder:"请输入密码"},{prefix:(0,i.k6)((()=>s[9]||(s[9]=[(0,i.Lk)("img",{class:"login-input-icon",src:g},null,-1)]))),_:1},8,["value"])])),_:1}),(0,i.bF)(u,null,{default:(0,i.k6)((()=>[(0,i.bF)(d,{class:"login-btn",type:"primary",block:"","html-type":"submit"},{default:(0,i.k6)((()=>s[10]||(s[10]=[(0,i.eW)("登录")]))),_:1}),s[11]||(s[11]=(0,i.Lk)("div",{class:"login-tip"},"暂无账号？可扫码登录后设置",-1))])),_:1})])),_:1},8,["model"])])]))]),(0,i.bF)(k.A,{copyright:E.value.copyright},null,8,["copyright"])])}}},E=a(71241);const $=(0,E.A)(z,[["__scopeId","data-v-58062828"]]);var I=$}}]);