"use strict";(self["webpackChunkzmwk_session_archive"]=self["webpackChunkzmwk_session_archive"]||[]).push([[746],{1241:function(e,o){o.A=(e,o)=>{const s=e.__vccOpts||e;for(const[t,n]of o)s[t]=n;return s}},4935:function(e,o,s){s.d(o,{A:function(){return r}});var t=s(6768);const n={id:"_footer",class:"_main-footer normal hide"};var a={__name:"mainFooter",setup(e){function o(){const e=document.body.scrollHeight,o=window.innerHeight,s=document.getElementById("_footer");s&&(e>o?s.classList.add("normal"):s.classList.remove("normal"))}return(0,t.sV)((()=>{window.addEventListener("load",o),window.addEventListener("resize",o),setTimeout((()=>{o(),document.getElementById("_footer").classList.remove("hide")}),1e3)})),(e,o)=>((0,t.uX)(),(0,t.CE)("div",n,o[0]||(o[0]=[(0,t.Lk)("div",{class:"copyright"},"Copyright © 2021, 芝麻小事网络科技（武汉）有限公司",-1)])))}},i=s(1241);const c=(0,i.A)(a,[["__scopeId","data-v-6e41ce21"]]);var r=c},1034:function(e,o,s){s.d(o,{A:function(){return b}});var t=s(6768),n=s(4232),a=s(144),i=s.p+"img/logo.bfba7370.png",c=s(7767),r=s(782),l=s(9804),d=s(7694),u=s(5389),g=s(8298);const m={class:"right-header-nav"},p={key:0,class:"my-shadow"},v={key:0,class:"menus-box"},k={class:"user-info-box"},A={class:"ml4"};var f={__name:"mainHeader",props:{background:String,showMenus:{type:Boolean,default:!1}},setup(e){const o=e,s=(0,r.Pj)(),f=(0,t.EW)((()=>s.getters.getUserInfo)),w=(0,t.EW)((()=>({background:o.background}))),h=()=>{l.A.confirm({title:"提示",content:"确认退出当前登录账户？",onOk:()=>{d.Ay.loading("正在退出..."),setTimeout((()=>{d.Ay.destroy(),(0,g.Hr)()}),1e3)}})};return(o,s)=>{const r=(0,t.g2)("a-menu-item"),l=(0,t.g2)("a-menu"),d=(0,t.g2)("a-dropdown");return(0,t.uX)(),(0,t.CE)("div",{class:"_main-header",style:(0,n.Tr)(w.value)},[s[3]||(s[3]=(0,t.Lk)("div",{class:"logo-box"},[(0,t.Lk)("img",{src:i,class:"logo"})],-1)),(0,t.Lk)("div",m,[e.showMenus?((0,t.uX)(),(0,t.CE)("div",p)):(0,t.Q3)("",!0),(0,t.Lk)("div",null,[e.showMenus?((0,t.uX)(),(0,t.CE)("div",v,s[0]||(s[0]=[(0,t.Lk)("div",{class:"menu-item active"},"会话质检",-1)]))):(0,t.Q3)("",!0)]),f.value.id>0?((0,t.uX)(),(0,t.Wv)(d,{key:1},{overlay:(0,t.k6)((()=>[(0,t.bF)(l,null,{default:(0,t.k6)((()=>[(0,t.bF)(r),(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",{class:"text-center",onClick:h},s[2]||(s[2]=[(0,t.Lk)("a",null,"退出登录",-1)]))])),_:1}),(0,t.bF)(r)])),_:1})])),default:(0,t.k6)((()=>[(0,t.Lk)("div",k,[s[1]||(s[1]=(0,t.Lk)("img",{src:c,class:"avatar"},null,-1)),(0,t.Lk)("span",A,(0,n.v_)(f.value.userid),1),(0,t.bF)((0,a.R1)(u.A),{class:"ml4"})])])),_:1})):(0,t.Q3)("",!0)])],4)}}},w=s(1241);const h=(0,w.A)(f,[["__scopeId","data-v-5be8bb28"]]);var b=h},6833:function(e,o,s){s.r(o),s.d(o,{default:function(){return U}});s(4114);var t=s(6768),n=s.p+"img/login-cover.796e3ff6.png",a=s.p+"img/login-tips-triangle.5d131754.svg",i=s.p+"img/user-login.593d546a.svg",c=s.p+"img/wx-login.c6c9abbf.svg",r=s.p+"img/user.550b47c3.svg",l=s.p+"img/password.649d631d.svg",d=s(144),u=s(1387),g=s(782),m=s(1034),p=s(4935),v=s(1824),k=s(5067);const A="zm:session:archive:login:user";var f={set:function(e,o,s){var t=e+"="+encodeURIComponent(o);s&&(t+="; expires="+s.toUTCString()),document.cookie=t},get:function(e){for(var o=document.cookie.split(";"),s=0;s<o.length;s++){var t=o[s].split("=");if(t[0].trim()===e)return decodeURIComponent(t[1])}return""},setCookieAcrossSubdomains(e,o,s,t){var n="";if(s){var a=new Date;a.setTime(a.getTime()+24*s*60*60*1e3),n="; expires="+a.toUTCString()}document.cookie=e+"="+(o||"")+n+"; domain="+t+"; path=/"},remove:function(e){this.set(e,"",new Date(0))}};function w(e){return/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z0-9]{2,}$/.test(e)?"."+e:e.match(/^[^.]*(.*)/)[1]}function h(e){f.setCookieAcrossSubdomains(A,e,1,w(window.location.host))}const b={class:"_main-container"},L={class:"main-content"},y={key:0,class:"right-box"},_={class:"right-icon-box"},I={key:1,class:"right-box"},C={class:"right-icon-box"},F={class:"sign-in"};var P={__name:"login",setup(e){const{proxy:o}=(0,t.nI)(),s=(0,u.rd)(),A=(0,g.Pj)(),f=(0,d.KR)(!0),w=(0,d.KR)(!1),P=(0,d.Kh)({username:"",password:"",remember:!0});(0,t.sV)((async()=>{console.log("ww",ww),console.log("SDK_VERSION",ww.SDK_VERSION),console.log("process.env.NODE_ENV","production")}));const B=e=>{console.log(e),"wx"===e?(w.value=!0,x()):w.value=!1},S=()=>{U()},U=()=>{(0,v.mD)({username:P.username,password:P.password}).then((e=>{z(e.data.token)})).catch((e=>{console.log(e.message)}))},x=()=>{(0,v.hY)().then((e=>{if(e?.data?.init){let{corp_id:o,agent_id:s}=e.data;M(o,s)}else o.$message.warning("企业信息不存在，请先注册企业信息！"),setTimeout((()=>{s.push({path:"/authorizedAccess/index"})}),1e3)})).finally((()=>{f.value=!1}))},M=async(e,s)=>{try{ww.createWWLoginPanel({el:"#ww_login",params:{login_type:"CorpApp",appid:e,agentid:s,redirect_uri:window.location.origin,state:"loginState",redirect_type:"callback"},onCheckWeComLogin({isWeComLogin:e}){console.log(e)},onLoginSuccess({code:o}){console.log({code:o}),(0,v.w4)({corp_id:e,code:o}).then((e=>{console.log("res",e),z(e.data.token)}))},onLoginFail(e){console.log(e)}})}catch(t){console.log("loginInit Err:",t),o.$message.error("初始化登录失败！")}},z=async e=>{try{(0,k.O5)(e);const t=await(0,v.HW)(),n=await(0,v.Gu)();if(!t.data||!n.data)return void o.$message.error("登录失败");(0,k.iA)(t.data),h(JSON.stringify(t.data)),(0,k.nY)(n.data),A.commit("setLoginInfo",t.data),A.commit("setCorpInfo",n.data),o.$message.success("登录成功，正在跳转主页"),setTimeout((()=>{n.data?.chat_public_key_version>0?s.push({path:"/index"}):s.push({path:"/authorizedAccess/guide"})}),1e3)}catch(t){console.log("Err:",t),o.$message.error("登录失败")}};return(e,o)=>{const s=(0,t.g2)("a-input"),d=(0,t.g2)("a-form-item"),u=(0,t.g2)("a-input-password"),g=(0,t.g2)("a-button"),v=(0,t.g2)("a-form");return(0,t.uX)(),(0,t.CE)("div",b,[(0,t.bF)(m.A),(0,t.Lk)("div",L,[o[12]||(o[12]=(0,t.Lk)("div",{class:"left-box"},[(0,t.Lk)("img",{src:n,class:"cover"})],-1)),w.value?((0,t.uX)(),(0,t.CE)("div",y,[(0,t.Lk)("div",_,[o[4]||(o[4]=(0,t.Lk)("div",{class:"login-tip-top"},[(0,t.eW)(" 使用密码登录 "),(0,t.Lk)("img",{class:"login-tip-top-icon",src:a})],-1)),(0,t.Lk)("img",{class:"right-check",src:i,onClick:o[0]||(o[0]=e=>B("account"))})]),o[5]||(o[5]=(0,t.Lk)("div",{id:"ww_login"},null,-1))])):((0,t.uX)(),(0,t.CE)("div",I,[(0,t.Lk)("div",C,[o[6]||(o[6]=(0,t.Lk)("div",{class:"login-tip-top"},[(0,t.eW)(" 扫码登录更便捷 "),(0,t.Lk)("img",{class:"login-tip-top-icon",src:a})],-1)),(0,t.Lk)("img",{class:"right-check",src:c,onClick:o[1]||(o[1]=e=>B("wx"))})]),(0,t.Lk)("div",F,[o[11]||(o[11]=(0,t.Lk)("h2",{class:"login-title"},"密码登录",-1)),(0,t.bF)(v,{class:"login-form",model:P,name:"basic",autocomplete:"off",onFinish:S},{default:(0,t.k6)((()=>[(0,t.bF)(d,{name:"username",class:"usernames",rules:[{required:!0,message:"请输入账号"}]},{default:(0,t.k6)((()=>[(0,t.bF)(s,{class:"login-item",value:P.username,"onUpdate:value":o[2]||(o[2]=e=>P.username=e),autocomplete:"off",placeholder:"请输入账号"},{prefix:(0,t.k6)((()=>o[7]||(o[7]=[(0,t.Lk)("img",{class:"login-input-icon",src:r},null,-1)]))),_:1},8,["value"])])),_:1}),(0,t.bF)(d,{name:"password",rules:[{required:!0,message:"请输入密码"}]},{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"login-item",value:P.password,"onUpdate:value":o[3]||(o[3]=e=>P.password=e),autocomplete:"off",type:"password",placeholder:"请输入密码"},{prefix:(0,t.k6)((()=>o[8]||(o[8]=[(0,t.Lk)("img",{class:"login-input-icon",src:l},null,-1)]))),_:1},8,["value"])])),_:1}),(0,t.bF)(d,null,{default:(0,t.k6)((()=>[(0,t.bF)(g,{class:"login-btn",type:"primary",block:"","html-type":"submit"},{default:(0,t.k6)((()=>o[9]||(o[9]=[(0,t.eW)("登录")]))),_:1}),o[10]||(o[10]=(0,t.Lk)("div",{class:"login-tip"},"暂无账号？可扫码登录后设置",-1))])),_:1})])),_:1},8,["model"])])]))]),(0,t.bF)(p.A)])}}},B=s(1241);const S=(0,B.A)(P,[["__scopeId","data-v-1334afda"]]);var U=S},7767:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA/tJREFUaEPtmk9slEUUwH/v6y5tFVpNgVBppSghYsVIqBFMTIxWapp4oD0RNfHmSSIHT8YT9mRiI568mZhIPLQk1aBgSbyBAmIIBaKEFi1UKaZxqdDt7n7PvG9dUpXdnV1m20/jO33ZfTPzfvNm5r35IyyQfQe1/rccz4qGPUAv0A7UL9RZgu8sMClwgCA8tCJIfLW7V9IFO6TwMfCFtobpcI8IrwJNS2CoS5PTqnwYZIPBN/tlygpEAJHx8zok6HaXWpZaR5GjQUb6DUKiYZMJ94rwxlIbVkn7qrzTnAzekoHPMj0aBh8BqyqpIAa6KZVglwyM5N5V2BMDg6oxYZ+8PZIbBzqqKR2DMhcMIAMkYmBMNSakDUCrKRmXMv8DFPPEsgQ0JPP/zmdhzgZqDcS7B+oTsOk+4aHWvwKcnoRzV5Rc6JfCK0BTA+zsCmi79/ZGTs7AgZMhqZv+ILwB3LUMujuFzW230qvbWjl2WRk9q8zO+YHwBrC1Q3iuU6gLShsWKhw5q3xz0c/i5w1g1zbhgVWle7+ANn5N+fhozABe6w5oanQbFjfSMHjYz2z25oHXdwTc7bj1sUn8/mjMAF7cLnSsdBtCF6eV/cdiNoSeeFB4ZpMQlGHIhjA6ppyciBnA8gbofljoXFua4Myk8uWYcmPebb6U0/I2B6whC2R9XQFriwSyyzMwHNdAVugpiwMb1wiPtkNjMr/pvpmB81P5VCJtZwwexasHFtqVrPsTQPIAltDVQmoGYNmoecM8YAmc754vdIY3AFt91jQTLaUrV4DlRhGA5AEs95n5HS5cVaav53/zIXcM0HoPbFgtPLZOoknsIqk5ODWhfP+LcjXlUqK4TtUANsYt739qo9DcmO/pSsSSOvPI8XHlux+r3ydUBWA9/cKWgPtbKBu4XKAu/Qojp6rbJ1QMYMZb3m+971POTWkUoSvd7FQEYJPypSeL77juFMg88cnXIZmce00VAdim5fnNfnv+76Z+fjrk20s1AFjdBH1bA1qWu1dejea1WRg+EUZLrYs4e+Dx9RKN/XLZpkujpXQsPthcOOGYrToD9HfZUUlth08B7PzPytBxt3TbGWDHI4J5YTHEYsPhM54BbPncsk5ob6kdgipcmckHt9lbt2Cl23P2gFVj479wXFgLDAOwpM+itKtUBOBa6WLq/ScA7JDP8UBkMfvWqa2seeAHYIOTevyUJgzgPWB3/Gwrb5HAoOz9VHtFw/0xvp0vRjItQfjyv/+i2/AGhrRVk7lhkG3lHRcHDT0mmbq+6KlBwRyDCBPRY49XYnxrn1Llg3889ihA2LuJ6/PZpwmCHoWdQFsM7pAtqfgJwoMqiUPNdRxZ+NzmD26ItxWYaSgLAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=746.dd6d8d46.js.map