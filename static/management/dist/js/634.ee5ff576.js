"use strict";(self["webpackChunkzmwk_session_archive"]=self["webpackChunkzmwk_session_archive"]||[]).push([[634],{1241:function(e,t){t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[l,n]of t)a[l]=n;return a}},8292:function(e,t,a){a.d(t,{A:function(){return r}});var l=a(6768);const n={class:"loading-box"};function c(e,t){const a=(0,l.g2)("a-spin");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.bF)(a)])}var s=a(1241);const o={},i=(0,s.A)(o,[["render",c],["__scopeId","data-v-3d53ffb8"]]);var r=i},4935:function(e,t,a){a.d(t,{A:function(){return i}});var l=a(6768);const n={id:"_footer",class:"_main-footer normal hide"};var c={__name:"mainFooter",setup(e){function t(){const e=document.body.scrollHeight,t=window.innerHeight,a=document.getElementById("_footer");a&&(e>t?a.classList.add("normal"):a.classList.remove("normal"))}return(0,l.sV)((()=>{window.addEventListener("load",t),window.addEventListener("resize",t),setTimeout((()=>{t(),document.getElementById("_footer").classList.remove("hide")}),1e3)})),(e,t)=>((0,l.uX)(),(0,l.CE)("div",n,t[0]||(t[0]=[(0,l.Lk)("div",{class:"copyright"},"Copyright © 2021, 芝麻小事网络科技（武汉）有限公司",-1)])))}},s=a(1241);const o=(0,s.A)(c,[["__scopeId","data-v-6e41ce21"]]);var i=o},1034:function(e,t,a){a.d(t,{A:function(){return g}});var l=a(6768),n=a(4232),c=a(144),s=a.p+"img/logo.bfba7370.png",o=a(7767),i=a(782),r=a(9804),u=a(7694),k=a(5389),d=a(8298);const v={class:"right-header-nav"},b={key:0,class:"my-shadow"},m={key:0,class:"menus-box"},_={class:"user-info-box"},p={class:"ml4"};var A={__name:"mainHeader",props:{background:String,showMenus:{type:Boolean,default:!1}},setup(e){const t=e,a=(0,i.Pj)(),A=(0,l.EW)((()=>a.getters.getUserInfo)),h=(0,l.EW)((()=>({background:t.background}))),f=()=>{r.A.confirm({title:"提示",content:"确认退出当前登录账户？",onOk:()=>{u.Ay.loading("正在退出..."),setTimeout((()=>{u.Ay.destroy(),(0,d.Hr)()}),1e3)}})};return(t,a)=>{const i=(0,l.g2)("a-menu-item"),r=(0,l.g2)("a-menu"),u=(0,l.g2)("a-dropdown");return(0,l.uX)(),(0,l.CE)("div",{class:"_main-header",style:(0,n.Tr)(h.value)},[a[3]||(a[3]=(0,l.Lk)("div",{class:"logo-box"},[(0,l.Lk)("img",{src:s,class:"logo"})],-1)),(0,l.Lk)("div",v,[e.showMenus?((0,l.uX)(),(0,l.CE)("div",b)):(0,l.Q3)("",!0),(0,l.Lk)("div",null,[e.showMenus?((0,l.uX)(),(0,l.CE)("div",m,a[0]||(a[0]=[(0,l.Lk)("div",{class:"menu-item active"},"会话质检",-1)]))):(0,l.Q3)("",!0)]),A.value.id>0?((0,l.uX)(),(0,l.Wv)(u,{key:1},{overlay:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(i),(0,l.bF)(i,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:"text-center",onClick:f},a[2]||(a[2]=[(0,l.Lk)("a",null,"退出登录",-1)]))])),_:1}),(0,l.bF)(i)])),_:1})])),default:(0,l.k6)((()=>[(0,l.Lk)("div",_,[a[1]||(a[1]=(0,l.Lk)("img",{src:o,class:"avatar"},null,-1)),(0,l.Lk)("span",p,(0,n.v_)(A.value.userid),1),(0,l.bF)((0,c.R1)(k.A),{class:"ml4"})])])),_:1})):(0,l.Q3)("",!0)])],4)}}},h=a(1241);const f=(0,h.A)(A,[["__scopeId","data-v-5be8bb28"]]);var g=f},9798:function(e,t,a){a.r(t),a.d(t,{default:function(){return W}});var l=a(6768),n=a(144),c=a(1034),s=a(4935),o=a(4232),i=a(782),r=a(7403),u=a(7694),k=a(1824),d=a(8298),v=a(8292);const b={class:"main-content"},m={class:"content mt24"},_={key:1,class:"form-block"},p={class:"form-block-item"},A={class:"form-block-content"},h={class:"form-block-item"},f={class:"form-block-content"},g={class:"text-center"},y={class:"form-block-item"},L={class:"form-block-content"},w={class:"text-center"},F={key:2,class:"text-center status-box"};var B={__name:"corpConfigForm",setup(e){const t=(0,i.Pj)(),a=(0,n.KR)(0),c=(0,n.KR)(1),s=(0,n.KR)(!1),B=(0,n.KR)(!1),C=(0,n.KR)([{title:"企业信息"},{title:"配置接收事件服务器"},{title:"完成"}]),E=(0,l.EW)((()=>t.getters.getCorpId)),I=(0,n.Kh)({chat_public_key:"",chat_private_key:"",chat_public_key_version:"",chat_secret:""}),P=(0,n.Kh)({url:"",callback_event_token:"",callback_event_aes_key:""});(0,l.sV)((()=>{s.value=!0,(0,k.lG)().then((e=>{I.chat_public_key=e.data.public_key,I.chat_private_key=e.data.private_key})).finally((()=>{s.value=!1})),(0,k.y9)().then((e=>{P.callback_event_token=e.data.token,P.callback_event_aes_key=e.data.aes_key,P.url=window.location.origin+"/openpush/qw/"+E.value}))}));const R=()=>{try{switch(B.value=!0,a.value){case 0:if(I.chat_secret=I.chat_secret.trim(),!I.chat_public_key||!I.chat_private_key)throw"缺少密钥信息";if(!I.chat_secret)throw"请输入会话存档密钥";if(!I.chat_public_key)throw"请输入公钥版本号";(0,k.ip)(I).then((()=>{a.value+=1})).finally((()=>{B.value=!1}));break;case 1:(0,k.XT)(P).then((e=>{a.value+=1,c.value=1})).finally((()=>{B.value=!1}));break}}catch(e){u.Ay.error(e),B.value=!1}};return(e,t)=>{const c=(0,l.g2)("a-steps"),i=(0,l.g2)("a-form-item"),u=(0,l.g2)("a-input"),k=(0,l.g2)("a-input-number"),E=(0,l.g2)("a-button"),M=(0,l.g2)("router-link"),W=(0,l.g2)("a-form");return(0,l.uX)(),(0,l.CE)("div",b,[t[17]||(t[17]=(0,l.Lk)("div",{class:"title"},[(0,l.eW)(" 使用前请按照步骤正确完成配置 "),(0,l.Lk)("a",{class:"ml16",href:"http://zhimahuihua.com/docs/integration/#%E4%BC%9A%E8%AF%9D%E5%AD%98%E6%A1%A3%E7%9A%84%E9%85%8D%E7%BD%AE%E6%B5%81%E7%A8%8B",target:"_blank"},"如何配置?")],-1)),(0,l.Lk)("div",m,[(0,l.bF)(c,{current:a.value,items:C.value},null,8,["current","items"]),(0,l.bF)(W,{class:"mt24",model:I,name:"basic","label-col":{span:6},"wrapper-col":{span:14},autocomplete:"off"},{default:(0,l.k6)((()=>[s.value?((0,l.uX)(),(0,l.Wv)(v.A,{key:0})):((0,l.uX)(),(0,l.CE)("div",_,[0==a.value?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.Lk)("div",p,[t[7]||(t[7]=(0,l.Lk)("div",{class:"form-block-title"}," 复制以下信息并填入到企业微信后台 ",-1)),(0,l.Lk)("div",A,[(0,l.bF)(i,{label:"加密公钥",class:"label-height-unset"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:"c595959 zm-pointer",onClick:t[0]||(t[0]=e=>(0,n.R1)(d.Dk)(I.chat_public_key))},[t[6]||(t[6]=(0,l.Lk)("a",null,"点击复制",-1)),(0,l.Lk)("pre",null,(0,o.v_)(I.chat_public_key),1)])])),_:1})])]),(0,l.Lk)("div",h,[t[8]||(t[8]=(0,l.Lk)("div",{class:"form-block-title"},"将企业微信后台会话存档配置页面的信息复制粘贴到下框中",-1)),(0,l.Lk)("div",f,[(0,l.bF)(i,{label:"会话存档密钥",name:"corp_id"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{value:I.chat_secret,"onUpdate:value":t[1]||(t[1]=e=>I.chat_secret=e),placeholder:"请输入会话存档密钥"},null,8,["value"])])),_:1}),(0,l.bF)(i,{label:"公钥版本号",name:"corp_id"},{default:(0,l.k6)((()=>[(0,l.bF)(k,{style:{width:"100%"},precision:0,value:I.chat_public_key_version,"onUpdate:value":t[2]||(t[2]=e=>I.chat_public_key_version=e),placeholder:"请输入公钥版本号"},null,8,["value"])])),_:1})])]),(0,l.Lk)("div",g,[(0,l.bF)(E,{type:"primary",class:"main-btn",onClick:R,loading:B.value},{default:(0,l.k6)((()=>t[9]||(t[9]=[(0,l.eW)("验证配置信息 ")]))),_:1},8,["loading"])])],64)):1==a.value?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.Lk)("div",y,[t[13]||(t[13]=(0,l.Lk)("div",{class:"form-block-title"}," 将以下信息复制到企微后台-应用管理-接收消息服务器中 ",-1)),(0,l.Lk)("div",L,[(0,l.bF)(i,{label:"URL",class:"label-height-unset"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:"zm-pointer",onClick:t[3]||(t[3]=e=>(0,n.R1)(d.Dk)(P.url))},[t[10]||(t[10]=(0,l.Lk)("div",null,[(0,l.Lk)("a",null,"点击复制")],-1)),(0,l.eW)(" "+(0,o.v_)(P.url),1)])])),_:1}),(0,l.bF)(i,{label:"token",class:"label-height-unset"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:"zm-pointer",onClick:t[4]||(t[4]=e=>(0,n.R1)(d.Dk)(P.callback_event_token))},[t[11]||(t[11]=(0,l.Lk)("div",null,[(0,l.Lk)("a",null,"点击复制")],-1)),(0,l.eW)(" "+(0,o.v_)(P.callback_event_token),1)])])),_:1}),(0,l.bF)(i,{label:"encodingAESSKey",class:"label-height-unset"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:"zm-pointer",onClick:t[5]||(t[5]=e=>(0,n.R1)(d.Dk)(P.callback_event_aes_key))},[t[12]||(t[12]=(0,l.Lk)("div",null,[(0,l.Lk)("a",null,"点击复制")],-1)),(0,l.eW)(" "+(0,o.v_)(P.callback_event_aes_key),1)])])),_:1})])]),(0,l.Lk)("div",w,[(0,l.bF)(E,{type:"primary",class:"main-btn",onClick:R,loading:B.value},{default:(0,l.k6)((()=>t[14]||(t[14]=[(0,l.eW)("完成")]))),_:1},8,["loading"])])],64)):2==a.value?((0,l.uX)(),(0,l.CE)("div",F,[(0,l.bF)((0,n.R1)(r.A),{style:{color:"#21A665","font-size":"60px"}}),t[16]||(t[16]=(0,l.Lk)("div",{class:"status-title mt16"},"验证成功",-1)),(0,l.bF)(M,{to:"/index"},{default:(0,l.k6)((()=>[(0,l.bF)(E,{class:"mt32",type:"primary"},{default:(0,l.k6)((()=>t[15]||(t[15]=[(0,l.eW)("去使用")]))),_:1})])),_:1})])):(0,l.Q3)("",!0)]))])),_:1},8,["model"])])])}}},C=a(1241);const E=(0,C.A)(B,[["__scopeId","data-v-99769814"]]);var I=E;const P={class:"_main-container"};var R={__name:"auth",setup(e){(0,n.KR)(0);return(e,t)=>((0,l.uX)(),(0,l.CE)("div",P,[(0,l.bF)(c.A),(0,l.bF)(I),(0,l.bF)(s.A)]))}};const M=(0,C.A)(R,[["__scopeId","data-v-15e5cb3a"]]);var W=M},7767:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA/tJREFUaEPtmk9slEUUwH/v6y5tFVpNgVBppSghYsVIqBFMTIxWapp4oD0RNfHmSSIHT8YT9mRiI568mZhIPLQk1aBgSbyBAmIIBaKEFi1UKaZxqdDt7n7PvG9dUpXdnV1m20/jO33ZfTPzfvNm5r35IyyQfQe1/rccz4qGPUAv0A7UL9RZgu8sMClwgCA8tCJIfLW7V9IFO6TwMfCFtobpcI8IrwJNS2CoS5PTqnwYZIPBN/tlygpEAJHx8zok6HaXWpZaR5GjQUb6DUKiYZMJ94rwxlIbVkn7qrzTnAzekoHPMj0aBh8BqyqpIAa6KZVglwyM5N5V2BMDg6oxYZ+8PZIbBzqqKR2DMhcMIAMkYmBMNSakDUCrKRmXMv8DFPPEsgQ0JPP/zmdhzgZqDcS7B+oTsOk+4aHWvwKcnoRzV5Rc6JfCK0BTA+zsCmi79/ZGTs7AgZMhqZv+ILwB3LUMujuFzW230qvbWjl2WRk9q8zO+YHwBrC1Q3iuU6gLShsWKhw5q3xz0c/i5w1g1zbhgVWle7+ANn5N+fhozABe6w5oanQbFjfSMHjYz2z25oHXdwTc7bj1sUn8/mjMAF7cLnSsdBtCF6eV/cdiNoSeeFB4ZpMQlGHIhjA6ppyciBnA8gbofljoXFua4Myk8uWYcmPebb6U0/I2B6whC2R9XQFriwSyyzMwHNdAVugpiwMb1wiPtkNjMr/pvpmB81P5VCJtZwwexasHFtqVrPsTQPIAltDVQmoGYNmoecM8YAmc754vdIY3AFt91jQTLaUrV4DlRhGA5AEs95n5HS5cVaav53/zIXcM0HoPbFgtPLZOoknsIqk5ODWhfP+LcjXlUqK4TtUANsYt739qo9DcmO/pSsSSOvPI8XHlux+r3ydUBWA9/cKWgPtbKBu4XKAu/Qojp6rbJ1QMYMZb3m+971POTWkUoSvd7FQEYJPypSeL77juFMg88cnXIZmce00VAdim5fnNfnv+76Z+fjrk20s1AFjdBH1bA1qWu1dejea1WRg+EUZLrYs4e+Dx9RKN/XLZpkujpXQsPthcOOGYrToD9HfZUUlth08B7PzPytBxt3TbGWDHI4J5YTHEYsPhM54BbPncsk5ob6kdgipcmckHt9lbt2Cl23P2gFVj479wXFgLDAOwpM+itKtUBOBa6WLq/ScA7JDP8UBkMfvWqa2seeAHYIOTevyUJgzgPWB3/Gwrb5HAoOz9VHtFw/0xvp0vRjItQfjyv/+i2/AGhrRVk7lhkG3lHRcHDT0mmbq+6KlBwRyDCBPRY49XYnxrn1Llg3889ihA2LuJ6/PZpwmCHoWdQFsM7pAtqfgJwoMqiUPNdRxZ+NzmD26ItxWYaSgLAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=634.ee5ff576.js.map