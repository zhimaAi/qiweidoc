{"version":3,"file":"js/975.39806cdf.js","mappings":"ipBA8EA,MAAMA,EAAgBC,EAAQ,MACxBC,GAAQC,EAAAA,EAAAA,MACRC,GAAUC,EAAAA,EAAAA,KAAI,GACdC,GAAYD,EAAAA,EAAAA,IAAI,CAClBE,KAAM,GACNC,OAAQ,KAENC,GAAYJ,EAAAA,EAAAA,IAAI,GAChBK,GAAOL,EAAAA,EAAAA,IAAI,IACXM,EAAU,CACZ,CACIC,MAAO,OACPC,UAAW,YACXC,MAAO,KAEX,CACIF,MAAO,KACPC,UAAW,WACXC,MAAO,KAEX,CACIF,MAAO,UACPC,UAAW,gBAEf,CACID,MAAO,UACPC,UAAW,cAaf,CACID,MAAO,OACPC,UAAW,eACXC,MAAO,IACPC,YAAa,CACTC,aAAc,gBAGtB,CACIJ,MAAO,MACPC,UAAW,qBACXC,MAAO,KAEX,CACIF,MAAO,KACPC,UAAW,KACXC,MAAO,IACPC,YAAa,CACTC,aAAc,aAKpBC,GAAaC,EAAAA,EAAAA,IAAS,CACxBC,QAAS,EACTC,KAAM,EACNC,SAAU,GACVC,MAAO,EACPC,gBAAiB,CAAC,KAAM,KAAM,KAAM,OACpCC,iBAAiB,EACjBC,iBAAiB,IAEfC,GAAaR,EAAAA,EAAAA,IAAS,CACxBS,QAAS,KAWb,SAASC,IACL,OAAOC,IAAM3B,EAAM4B,MAAMC,YAAYC,OAAO,aAChD,CAEA,SAASC,IACLhB,EAAWE,QAAU,EACrBe,GACJ,CAEA,SAASA,IACL9B,EAAQ+B,OAAQ,EAChB,IAAIC,EAAO,CACPhB,KAAMH,EAAWE,QACjBkB,KAAMpB,EAAWI,SACjBiB,YAAapC,EAAM4B,MAAMS,WACzBC,QAAStC,EAAM4B,MAAMC,WACrBU,UAAW,GAEff,EAAWC,QAAUD,EAAWC,QAAQe,OACpChB,EAAWC,UACXS,EAAKT,QAAUD,EAAWC,QAyBlC,CAEA,SAASgB,EAAYC,GACjB3B,EAAa4B,OAAOC,OAAO7B,EAAY2B,GACvCV,GACJ,C,66DC7MA,MAAMa,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://zmwk_session_archive/./src/views/sessionStatistics/group/detail.vue","webpack://zmwk_session_archive/./src/views/sessionStatistics/group/detail.vue?13b4"],"sourcesContent":["<template>\n    <MainLayout :title=\"[\n        {name: '群聊统计', route: '/sessionStatistics/group'},\n        {name: '员工群聊明细'}\n    ]\">\n        <div class=\"zm-main-content\">\n            <div class=\"header\">\n                <div class=\"left\">\n                    <div class=\"item zm-user-info\">\n                        <img class=\"avatar\"\n                             style=\"width: 24px;height: 24px;\"\n                             :src=\"staffInfo.avatar || defaultAvatar\"/>\n                        <span class=\"name\">{{ staffInfo.name }}</span>\n                    </div>\n                    <div class=\"hr\"></div>\n                    <div class=\"item\">群聊总数：{{ pagination.total }}</div>\n                    <div class=\"hr\"></div>\n                    <div class=\"item\">统计时间：{{ statDateFormat() }}</div>\n                </div>\n                <div class=\"right filter-box\">\n                    <div class=\"filter-item ml16\">\n                        <a-input\n                            v-model=\"filterData.keyword\"\n                            allowClear\n                            placeholder=\"请输入群聊名称进行搜索\"\n                            @change=\"search\"\n                            style=\"width: 220px;\"/>\n                    </div>\n                </div>\n            </div>\n            <a-tabs v-model:active=\"activeTab\">\n                <a-tab-pane :key=\"1\" tab=\"全部群聊\"></a-tab-pane>\n                <a-tab-pane :key=\"2\" tab=\"今日新增群聊\"></a-tab-pane>\n                <a-tab-pane :key=\"3\" tab=\"活跃群聊\"></a-tab-pane>\n                <a-tab-pane :key=\"4\" tab=\"已回复群聊\"></a-tab-pane>\n                <a-tab-pane :key=\"4\" tab=\"未回复群聊\"></a-tab-pane>\n            </a-tabs>\n            <div class=\"table-box\">\n                <a-table :loading=\"loading\"\n                         :data-source=\"list\"\n                         :columns=\"columns\"\n                         :pagination=\"pagination\"\n                         @change=\"tableChange\"\n                >\n                    <template #replyRate>\n                        {{ msgReplySec }}分钟回复率\n                    </template>\n                    <template #replyStatus=\"text,record\">\n                        <span v-if=\"record.reply_status == -1\">--</span>\n                        <div class=\"reply-status\" v-else-if=\"record.reply_status==1\">\n                            <CheckCircleFilled/>\n                            <span>已回复</span>\n                        </div>\n                        <div class=\"reply-status no\" v-else>\n                            <ExclamationCircleFilled/>\n                            <span>未回复</span>\n                        </div>\n                    </template>\n                    <template #operate=\"text,record\">\n                        <a @click=\"linkChat(record)\">明细</a>\n                        <a class=\"ml16 group_scan_code\"\n                           @click.stop=\"(e)=>{showGroupCode(record,e)}\">进群</a>\n                    </template>\n                </a-table>\n            </div>\n            <!--        <GroupCode ref=\"groupCodeRef\" class=\"custom-group-code\"></GroupCode>-->\n        </div>\n    </MainLayout>\n</template>\n\n<script setup>\nimport {ref, reactive} from 'vue';\nimport {useRoute} from 'vue-router';\nimport dayjs from \"dayjs\";\nimport {message} from 'ant-design-vue';\nimport {ExclamationCircleFilled, CheckCircleFilled} from '@ant-design/icons-vue';\nimport MainLayout from \"@/components/mainLayout.vue\";\n\nconst defaultAvatar = require('@/assets/default-avatar.png');\nconst route = useRoute()\nconst loading = ref(false)\nconst staffInfo = ref({\n    name: '',\n    avatar: '',\n})\nconst activeTab = ref(1)\nconst list = ref([])\nconst columns = [\n    {\n        title: \"群聊名称\",\n        dataIndex: \"room_name\",\n        width: 300,\n    },\n    {\n        title: \"群主\",\n        dataIndex: \"stf_name\",\n        width: 120,\n    },\n    {\n        title: \"员工发送消息数\",\n        dataIndex: \"staff_msg_no\",\n    },\n    {\n        title: \"客户发送消息数\",\n        dataIndex: \"cst_msg_no\",\n    },\n    // {\n    //     // title: \"3分钟回复率\",\n    //     dataIndex: \"rate\",\n    //     slots: {\n    //         title: \"replyRate\"\n    //     },\n    // },\n    // {\n    //     title: \"首次回复时长\",\n    //     dataIndex: \"time_st\",\n    // },\n    {\n        title: \"回复状态\",\n        dataIndex: \"reply_status\",\n        width: 120,\n        scopedSlots: {\n            customRender: \"replyStatus\"\n        },\n    },\n    {\n        title: \"发起人\",\n        dataIndex: \"promoter_type_text\",\n        width: 100,\n    },\n    {\n        title: \"操作\",\n        dataIndex: \"id\",\n        width: 120,\n        scopedSlots: {\n            customRender: \"operate\"\n        }\n    },\n]\n\nconst pagination = reactive({\n    current: 1,\n    page: 1,\n    pageSize: 10,\n    total: 0,\n    pageSizeOptions: ['10', '20', '50', '100'],\n    showQuickJumper: true,\n    showSizeChanger: true,\n})\nconst filterData = reactive({\n    keyword: \"\"\n})\n\nfunction createdFunc() {\n    this.init()\n}\n\nfunction init() {\n    this.loadData()\n}\n\nfunction statDateFormat() {\n    return dayjs(route.query.filterDate).format(\"YYYY-MM-DD\")\n}\n\nfunction search() {\n    pagination.current = 1\n    loadData()\n}\n\nfunction loadData() {\n    loading.value = true\n    let data = {\n        page: pagination.current,\n        size: pagination.pageSize,\n        open_userid: route.query.openUserid,\n        date_no: route.query.filterDate,\n        is_active: 1,//活跃群聊\n    }\n    filterData.keyword = filterData.keyword.trim()\n    if (filterData.keyword) {\n        data.keyword = filterData.keyword\n    }\n    // let request = staffGroups\n    // if (this.MODE == 2) {\n    //     request = authModeStaffGroups\n    // }\n    // request(data).then(res => {\n    //     let list = res.data.list || []\n    //     list.map(item => {\n    //         if (item.reply_status == -1) {\n    //             item.time_st = \"--\"\n    //             item.promoter_type_text = \"--\"\n    //             item.rate = \"--\"\n    //         } else {\n    //             item.time_st = secondToDate(item.time_st)\n    //             item.promoter_type_text = item.promoter_type == 0 ? '员工' : '客户'\n    //             item.rate = computedRate(Number(item.reply_no_intime), Number(item.round_no))\n    //         }\n    //     })\n    //     this.list = list\n    //     this.pagination.total = Number(res.data.count)\n    //     this.staffInfo = res.data.staff_info || {}\n    // }).finally(() => {\n    //     this.loading = false\n    // })\n}\n\nfunction tableChange(p) {\n    pagination = Object.assign(pagination, p)\n    loadData()\n}\n</script>\n\n<style scoped lang=\"less\">\n.zm-main-content {\n    min-height: 86vh;\n}\n.header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    .left {\n        display: flex;\n        align-items: center;\n        font-size: 14px;\n        font-weight: 400;\n        color: #595959;\n\n        .item {\n            display: flex;\n            align-items: center;\n        }\n\n        .hr {\n            background: #D9D9D9;\n            width: 1px;\n            height: 12px;\n            margin: 0 16px;\n        }\n    }\n}\n\n.reply-status {\n    display: inline-block;\n    font-size: 14px;\n    font-weight: 600;\n    color: #21A665;\n    padding: 2px 6px;\n    border-radius: 2px;\n    background: #E8FCF3;\n\n    span {\n        margin-left: 4px;\n    }\n\n    &.no {\n        background: #FAEBE6;\n        color: #ED744A;\n    }\n}\n</style>\n","import script from \"./detail.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./detail.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./detail.vue?vue&type=style&index=0&id=5c7f0136&scoped=true&lang=less\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5c7f0136\"]])\n\nexport default __exports__"],"names":["defaultAvatar","require","route","useRoute","loading","ref","staffInfo","name","avatar","activeTab","list","columns","title","dataIndex","width","scopedSlots","customRender","pagination","reactive","current","page","pageSize","total","pageSizeOptions","showQuickJumper","showSizeChanger","filterData","keyword","statDateFormat","dayjs","query","filterDate","format","search","loadData","value","data","size","open_userid","openUserid","date_no","is_active","trim","tableChange","p","Object","assign","__exports__"],"sourceRoot":""}