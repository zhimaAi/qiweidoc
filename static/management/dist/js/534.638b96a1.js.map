{"version":3,"file":"js/534.638b96a1.js","mappings":"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","sources":["webpack://zmwk_session_archive/./node_modules/@ant-design/icons-svg/es/asn/PlusCircleOutlined.js","webpack://zmwk_session_archive/./node_modules/@ant-design/icons-vue/es/icons/PlusCircleOutlined.js","webpack://zmwk_session_archive/./src/components/tools/timesRange.vue","webpack://zmwk_session_archive/./src/components/tools/timesRange.vue?be13","webpack://zmwk_session_archive/./src/views/sessionStatistics/compoments/privateRule.vue","webpack://zmwk_session_archive/./src/views/sessionStatistics/compoments/privateRule.vue?e6bd","webpack://zmwk_session_archive/./src/views/sessionStatistics/compoments/groupRule.vue","webpack://zmwk_session_archive/./src/views/sessionStatistics/compoments/groupRule.vue?ea34","webpack://zmwk_session_archive/./src/views/sessionStatistics/rule.vue","webpack://zmwk_session_archive/./src/views/sessionStatistics/rule.vue?10f2"],"sourcesContent":["// This icon file is generated automatically.\nvar PlusCircleOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z\" } }] }, \"name\": \"plus-circle\", \"theme\": \"outlined\" };\nexport default PlusCircleOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport PlusCircleOutlinedSvg from \"@ant-design/icons-svg/es/asn/PlusCircleOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar PlusCircleOutlined = function PlusCircleOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": PlusCircleOutlinedSvg\n  }), null);\n};\n\nPlusCircleOutlined.displayName = 'PlusCircleOutlined';\nPlusCircleOutlined.inheritAttrs = false;\nexport default PlusCircleOutlined;","<template>\n    <div class=\"times-range-container\">\n        <div class=\"time-range-item\" v-for=\"(item,i) in data\" :key=\"i\">\n            <div class=\"time-range-title\">\n                <span class=\"text\">时间段{{ i + 1 }}</span>\n                <DeleteOutlined\n                    :class=\"['del',{disabled: disabled || data.length < 2}]\"\n                    @click=\"remove(i)\"/>\n            </div>\n            <div class=\"time-range-body\">\n                <a-checkbox-group v-model:checked=\"item.week\" :disabled=\"disabled\" @change=\"change\">\n                    <a-checkbox\n                        v-for=\"week in weeks\"\n                        :key=\"week.value\"\n                        :value=\"week.value\"\n                        :disabled=\"disabledWeek(i,week)\"\n                    >\n                        {{ week.label }}\n                    </a-checkbox>\n                </a-checkbox-group>\n                <div class=\"times\">\n                    <div class=\"time-item\"\n                         v-for=\"(range,index) in item.ranges\"\n                         :key=\"index\">\n                        <a-range-picker\n                            v-model:value=\"range.times\"\n                            :disabled=\"disabled\"\n                            @change=\"change\"\n                            popupClassName=\"customize-time-range\"\n                            style=\"width: 300px\"\n                            format=\"HH:mm\"\n                            value-format=\"HH:mm\"\n                            :show-time=\"{format:'HH:mm'}\"\n                            :placeholder=\"['开始时间','结束时间']\"\n                            :mode=\"['time','time']\">\n                        </a-range-picker>\n                        <div class=\"operator-box ml8\">\n                            <PlusCircleOutlined\n                                :class=\"['add',{disabled: disabled || item.ranges.length >= timeLimit}]\"\n                                @click=\"addTimeRange(item)\"/>\n                            <CloseCircleOutlined\n                                :class=\"['remove ml8',{disabled: disabled || item.ranges.length < 2}]\"\n                                @click=\"removeTimeRange(item,index)\"/>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <a-button v-if=\"showAddBtn\"\n                  :disabled=\"disabled || data.length >= limit\"\n                  type=\"dashed\"\n                  :icon=\"h(PlusOutlined)\"\n                  @click=\"add\"\n                  style=\"width: 100%;\">添加时间段\n        </a-button>\n    </div>\n</template>\n\n<script setup>\nimport {ref, h} from 'vue';\nimport {DeleteOutlined, PlusOutlined, PlusCircleOutlined, CloseCircleOutlined} from '@ant-design/icons-vue';\nimport {copyObj, intervalOverlap, timeToNumber, weeks} from \"@/utils/tools\";\n\nconst emit = defineEmits(['change'])\nconst props = defineProps({\n    limit: {\n        type: Number,\n        default: 5,\n    },\n    timeLimit: {\n        type: Number,\n        default: 5,\n    },\n    disabled: {\n        type: Boolean,\n        default: false\n    },\n    showAddBtn: {\n        type: Boolean,\n        default: true\n    }\n})\n\nconst timeItemStruct = {\n    times: [],\n}\nconst dataItemStruct = {\n    week: [],\n    ranges: [\n        timeItemStruct\n    ],\n}\nconst data = ref([\n    {\n        ...dataItemStruct,\n    }\n])\n\nfunction add() {\n    if (data.value.length >= props.limit) {\n        return\n    }\n    data.value.push(copyObj(dataItemStruct))\n}\n\nfunction remove(index) {\n    if (props.disabled || data.value.length === 1) {\n        return\n    }\n    data.value.splice(index, 1)\n    change()\n}\n\nfunction addTimeRange(record) {\n    if (props.disabled || record.ranges.length >= props.timeLimit) {\n        return\n    }\n    record.ranges.push(copyObj(timeItemStruct))\n}\n\nfunction removeTimeRange(record, index) {\n    if (props.disabled || record.ranges.length === 1) {\n        return\n    }\n    record.ranges.splice(index, 1)\n}\n\nfunction disabledWeek(index, week) {\n    let item\n    for (let i = 0; i < data.value.length; i++) {\n        item = data.value[i]\n        if (i !== index && item.week.includes(week.value)) {\n            return true\n        }\n    }\n    return false\n}\n\nfunction verify() {\n    let _data = copyObj(data.value)\n    _data = _data.filter(item => {\n        item.times = item.ranges.filter(range => range.times.length > 0)\n        return item.week.length > 0 && item.times.length > 0\n    })\n    if (!_data.length) {\n        return {\n            ok: false,\n            error: \"请至少完善一条时段规则\"\n        }\n    }\n    for (let item of _data) {\n        let times = item.ranges.map(range => {\n            return [\n                timeToNumber(range.times[0]),\n                timeToNumber(range.times[1])\n            ]\n        })\n        if (intervalOverlap(...times)) {\n            return {\n                ok: false,\n                error: \"工作时间段存在重叠，请检查后重新选择\"\n            }\n        }\n    }\n    return {\n        ok: true,\n    }\n}\n\nfunction output() {\n    let _data = copyObj(data.value)\n    _data = _data.filter(item => {\n        item.times = item.ranges.filter(range => range.times.length > 0)\n        item.week = item.week.sort()\n        return item.week.length > 0 && item.times.length > 0\n    })\n    return _data\n}\n\nfunction input(value) {\n    if (value.length) {\n        data.value = value\n    }\n}\n\nfunction change() {\n    emit('change')\n}\n</script>\n\n<style scoped lang=\"less\">\n.times-range-container {\n    width: 643px;\n\n    .time-range-item {\n        background: #F2F4F7;\n        border-radius: 2px;\n        opacity: 1;\n        border: 1px solid #E4E6EB;\n        margin-bottom: 10px;\n\n        .time-range-title {\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            padding: 8px 16px;\n            border-bottom: 1px solid #E4E6EB;\n\n            .text {\n                font-size: 14px;\n                font-weight: 600;\n                color: #242933;\n            }\n\n            .del {\n                font-size: 16px;\n            }\n\n            .del:hover {\n                color: #f77d84;\n            }\n        }\n\n        .time-range-body {\n            padding: 16px;\n        }\n\n        .time-item {\n            display: flex;\n            align-items: center;\n            margin-top: 8px;\n\n            .operator-box {\n                color: #595959;\n                font-size: 14px;\n                cursor: pointer;\n\n                .add:hover {\n                    color: #2475FC;\n                }\n\n                .remove:hover {\n                    color: #f77d84;\n                }\n            }\n        }\n    }\n\n    .disabled {\n        cursor: not-allowed;\n        color: rgba(0, 0, 0, 0.2);\n\n        &:hover {\n            color: rgba(0, 0, 0, 0.2) !important;\n        }\n    }\n}\n</style>\n","import script from \"./timesRange.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./timesRange.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./timesRange.vue?vue&type=style&index=0&id=0bb87112&scoped=true&lang=less\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0bb87112\"]])\n\nexport default __exports__","<template>\n    <div class=\"zm-main-box\">\n        <a-card :bordered=\"false\">\n            <template #title>\n                <div class=\"card-title\">\n                    <span class=\"title\">工作时间段设置</span>\n                    <span\n                        class=\"desc\">设置工作时间段后，则仅对设定的时间段内对开启会话存档的员工进行工作质量检测，单聊和群聊均使用此规则</span>\n                </div>\n            </template>\n            <TimesRange ref=\"timeRangeRef\" @change=\"configChange\"/>\n        </a-card>\n        <a-card :bordered=\"false\">\n            <template #title>\n                <div class=\"card-title\">\n                    <span class=\"title\">消息回复率</span>\n                    <span class=\"desc\">设置消息回复率后，单聊/群聊中的消息回复率将根据此处设置的时间进行统计</span>\n                </div>\n            </template>\n            <a-form-item label=\"消息回复率\" style=\"margin-bottom: 0;\">\n                <div class=\"zm-flex-center\">\n                    <a-input-number v-model:value=\"config.msg_reply_sec\" :min=\"1\" :max=\"20\" @change=\"configChange\"/>\n                    <span class=\"ml4\">分钟</span>\n                </div>\n                <div class=\"notice\">\n                    注意：消息回复率修改后，只会对修改后的数据生效，历史数据不生效，为防止数据出现误差，请谨慎操作\n                </div>\n                <a-checkbox\n                    class=\"mt10\"\n                    v-model:checked=\"config.group_other_effect\"\n                    @change=\"configChange\">\n                    群内其他员工{{ config.msg_reply_sec || '-' }}分钟内回复了，也算作{{\n                        config.msg_reply_sec || '-'\n                    }}分钟回复率\n                </a-checkbox>\n                <div class=\"select-user mt10\" v-if=\"config.group_other_effect\">\n                    <a-radio-group v-model:value=\"config.satff_radio\" @change=\"configChange\">\n                        <a-radio :value=\"1\">指定员工</a-radio>\n                        <a-radio :value=\"2\">全部群内员工</a-radio>\n                    </a-radio-group>\n                    <div class=\"tips\">\n                        指定员工算作{{ config.msg_reply_sec || '-' }}分钟回复率，其他未设置的群内员工回复了，不计入。该设置仅对群内成员生效\n                    </div>\n                    <div v-if=\"config.satff_radio == 1\" class=\"mt10\">\n                        <a-button @click=\"selectStaff\">选择员工</a-button>\n                        <div class=\"fx-ac\" style=\"flex-wrap: wrap;width: 891px;\">\n                            <a-tag\n                                style=\"margin-top: 10px;padding: 4px;\"\n                                closable\n                                @close=\"staffDel(index)\"\n                                v-for=\"(item, index) in staffList\"\n                                :key=\"item.staff_id\"\n                            >\n                                {{ item.name }}\n                            </a-tag>\n                        </div>\n                    </div>\n                </div>\n            </a-form-item>\n        </a-card>\n        <a-card :bordered=\"false\">\n            <template #title>\n                <div class=\"card-title\">\n                    <span class=\"title\">单聊未回复规则</span>\n                    <span\n                        class=\"desc\">设置未回复规则后，单聊中未回复聊天数和未回复聊天占比将根据此规则进行统计</span>\n                </div>\n            </template>\n            <div class=\"main-body\">\n                <a-alert type=\"info\"\n                         :show-icon=\"false\"\n                         banner\n                         message=\"客户关键字：单聊时，客户发送的最后一条消息匹配到关键词或消息类型匹配为选中类型，且员工没有回复，不算作未回复消息\"></a-alert>\n                <a-form-item label=\"全匹配\" class=\"mt24\">\n                    <a-input placeholder=\"请输入自定义匹配关键词\"\n                             :max-length=\"20\"\n                             v-model:value=\"input.single_keywords_full\"\n                             @keydown.enter=\"inputHandle('single_keywords','full')\"\n                             @blur=\"inputHandle('single_keywords','full')\"\n                             style=\"width: 360px\"/>\n                    <div class=\"keyword-tags\">\n                        <a-tag v-for=\"(keyword,i) in config.single_keywords.full\"\n                               class=\"zm-customize-tag\"\n                               style=\"margin: 8px 8px 0 0;\"\n                               closable\n                               @close=\"(e) => removeTag('single_keywords','full',i,e)\"\n                               :key=\"i\">{{ keyword }}\n                        </a-tag>\n                    </div>\n                </a-form-item>\n                <a-form-item label=\"半匹配\">\n                    <a-input placeholder=\"请输入自定义匹配关键词\"\n                             :max-length=\"20\"\n                             v-model:value=\"input.single_keywords_half\"\n                             @keydown.enter=\"inputHandle('single_keywords','half')\"\n                             @blur=\"inputHandle('single_keywords','half')\"\n                             style=\"width: 360px\"/>\n                    <div class=\"keyword-tags\">\n                        <a-tag v-for=\"(keyword,i) in config.single_keywords.half\"\n                               class=\"zm-customize-tag\"\n                               style=\"margin: 8px 8px 0 0;\"\n                               closable\n                               @close=\"(e) => removeTag('single_keywords','half',i,e)\"\n                               :key=\"i\">{{ keyword }}\n                        </a-tag>\n                    </div>\n                </a-form-item>\n                <a-form-item label=\"消息类型\" style=\"margin-bottom: 0;\">\n                    <a-checkbox-group v-model:checked=\"config.single_keywords.msg_type_filter\" @change=\"configChange\">\n                        <a-checkbox value=\"image\">图片</a-checkbox>\n                        <a-checkbox value=\"emoji_preg\">emoji</a-checkbox>\n                        <a-checkbox value=\"emotion\">表情包</a-checkbox>\n                    </a-checkbox-group>\n                </a-form-item>\n                <a-alert type=\"info\"\n                         class=\"mt24\"\n                         :show-icon=\"false\"\n                         banner\n                         message=\"员工关键字：员工客户聊天时，员工发送的最后一条消息匹配到关键词，将不算作回复消息\"></a-alert>\n                <a-form-item label=\"全匹配\" class=\"mt24\">\n                    <a-input placeholder=\"请输入自定义匹配关键词\"\n                             :max-length=\"20\"\n                             v-model:value=\"input.staff_single_keywords_full\"\n                             @keydown.enter=\"inputHandle('staff_single_keywords','full')\"\n                             @blur=\"inputHandle('staff_single_keywords','full')\"\n                             style=\"width: 360px\"/>\n                    <div class=\"keyword-tags\">\n                        <a-tag v-for=\"(keyword,i) in config.staff_single_keywords.full\"\n                               class=\"zm-customize-tag\"\n                               style=\"margin: 8px 8px 0 0;\"\n                               :closable=\"MODE != 2\"\n                               @close=\"(e) => removeTag('staff_single_keywords','full',i,e)\"\n                               :key=\"i\">{{ keyword }}\n                        </a-tag>\n                    </div>\n                </a-form-item>\n                <a-form-item label=\"半匹配\">\n                    <a-input placeholder=\"请输入自定义匹配关键词\"\n                             :max-length=\"20\"\n                             v-model:value=\"input.staff_single_keywords_half\"\n                             @keydown.enter=\"inputHandle('staff_single_keywords','half')\"\n                             @blur=\"inputHandle('staff_single_keywords','half')\"\n                             style=\"width: 360px\"/>\n                    <div class=\"keyword-tags\">\n                        <a-tag v-for=\"(keyword,i) in config.staff_single_keywords.half\"\n                               class=\"zm-customize-tag\"\n                               style=\"margin: 8px 8px 0 0;\"\n                               closable\n                               @close=\"(e) => removeTag('staff_single_keywords','half',i,e)\"\n                               :key=\"i\">{{ keyword }}\n                        </a-tag>\n                    </div>\n                </a-form-item>\n                <div class=\"zm-fixed-bottom-box\">\n                    <a-button type=\"primary\">保 存</a-button>\n                </div>\n            </div>\n        </a-card>\n    </div>\n</template>\n\n<script setup>\nimport {ref, reactive} from 'vue';\nimport MainLayout from \"@/components/mainLayout.vue\";\nimport TimesRange from \"@/components/tools/timesRange.vue\";\n\nconst timeRangeRef = ref(null)\nconst staffList = ref([])\nconst input = reactive({\n    single_keywords_full: \"\",\n    single_keywords_half: \"\",\n    group_keywords_full: \"\",\n    group_keywords_half: \"\",\n    staff_single_keywords_full: \"\",\n    staff_single_keywords_half: \"\",\n})\nconst config = reactive({\n    _id: \"\",\n    corp_id: \"\",\n    owner_id: \"\",\n    group_at_msg_reply_sec: 3,\n    msg_reply_sec: 3,\n    single_keywords: {\n        full: [],\n        half: [],\n        msg_type_filter: [],\n    },\n    group_keywords: {\n        full: [],\n        half: [],\n        msg_type_filter: [],\n    },\n    staff_single_keywords: {\n        full: [],\n        half: [],\n    },\n    other_effect: true,\n    group_other_effect: false, // 0:未选中，1:选中 需要转换成布尔渲染\n    group_staff_user_json: [], // 给后端的是json字符串，包含员工id，name\n    satff_radio: 2,\n    staffIds: []\n})\n\nfunction configChange() {\n\n}\n\nfunction selectStaff() {\n}\n\nfunction staffDel() {\n}\n\nfunction configFilled(config) {\n    // for (let key in this.config) {\n    //     if (typeof this.config[key] === \"object\" && !config[key]) {\n    //         continue\n    //     }\n    //     this.config[key] = config[key]\n    // }\n}\n\nfunction inputHandle(field, type) {\n    // let inputFiled\n    // try {\n    //     inputFiled = field + \"_\" + type\n    //     let val = this.input[inputFiled].trim()\n    //     if (!val) {\n    //         return\n    //     }\n    //     if (this.config[field][type].length > 19) {\n    //         throw \"每项最多输入20个关键词\"\n    //     }\n    //     if (this.config[field].half.includes(val)\n    //         || this.config[field].full.includes(val)) {\n    //         throw \"请勿重复输入关键字\"\n    //     } else {\n    //         this.config[field][type].push(val)\n    //     }\n    // } catch (e) {\n    //     this.$message.error(e)\n    // }\n    // this.input[inputFiled] = \"\"\n    // this.configChange()\n}\n\nfunction removeTag(field, type, index, e) {\n    // e.preventDefault();\n    // this.config[field][type].splice(index, 1)\n    // this.configChange()\n}\n</script>\n\n<style scoped lang=\"less\">\n@import \"rule\";\n</style>\n","import script from \"./privateRule.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./privateRule.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./privateRule.vue?vue&type=style&index=0&id=41c5dbfe&scoped=true&lang=less\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-41c5dbfe\"]])\n\nexport default __exports__","<template>\n    <div class=\"zm-main-box\">\n        <a-card :bordered=\"false\">\n            <template #title>\n                <div class=\"card-title\">\n                    <span class=\"title\">工作时间段设置</span>\n                    <span\n                        class=\"desc\">设置工作时间段后，则仅对设定的时间段内对开启会话存档的员工进行工作质量检测，单聊和群聊均使用此规则</span>\n                </div>\n            </template>\n            <TimesRange ref=\"timeRangeRef\" @change=\"configChange\"/>\n        </a-card>\n        <a-card :bordered=\"false\">\n            <template #title>\n                <div class=\"card-title\">\n                    <span class=\"title\">@员工后消息回复率</span>\n                    <span\n                        class=\"desc\">设置消息回复率后，群内成员的消息回复率将根据此处设置的时间进行统计，该设置仅对密码模式生效</span>\n                </div>\n            </template>\n            <a-form-item label=\"消息回复率\" style=\"margin-bottom: 0px;\">\n                <div class=\"zm-flex-center\">\n                    <a-input-number v-model:value=\"config.group_at_msg_reply_sec\" :min=\"1\" :max=\"180\"\n                                    @change=\"configChange\"/>\n                    <span class=\"ml4\">分钟</span>\n                </div>\n                <div class=\"notice\">\n                    注意：消息回复率修改后，只会对修改后的数据生效，历史数据不生效，为防止数据出现误差，请谨慎操作\n                </div>\n            </a-form-item>\n        </a-card>\n        <a-card :bordered=\"false\">\n            <template #title>\n                <div class=\"card-title\">\n                    <span class=\"title\">消息回复率</span>\n                    <span class=\"desc\">设置消息回复率后，单聊/群聊中的消息回复率将根据此处设置的时间进行统计</span>\n                </div>\n            </template>\n            <a-form-item label=\"消息回复率\" style=\"margin-bottom: 0;\">\n                <div class=\"zm-flex-center\">\n                    <a-input-number v-model:value=\"config.msg_reply_sec\" :min=\"1\" :max=\"20\" @change=\"configChange\"/>\n                    <span class=\"ml4\">分钟</span>\n                </div>\n                <div class=\"notice\">\n                    注意：消息回复率修改后，只会对修改后的数据生效，历史数据不生效，为防止数据出现误差，请谨慎操作\n                </div>\n                <a-checkbox\n                    class=\"mt10\"\n                    v-model:checked=\"config.group_other_effect\"\n                    @change=\"configChange\">\n                    群内其他员工{{ config.msg_reply_sec || '-' }}分钟内回复了，也算作{{\n                        config.msg_reply_sec || '-'\n                    }}分钟回复率\n                </a-checkbox>\n                <div class=\"mt10\" v-if=\"config.group_other_effect\">\n                    <a-radio-group v-model:value=\"config.satff_radio\" @change=\"configChange\">\n                        <a-radio :value=\"1\">指定员工</a-radio>\n                        <a-radio :value=\"2\">全部群内员工</a-radio>\n                    </a-radio-group>\n                    <div class=\"tips\">\n                        指定员工算作{{ config.msg_reply_sec || '-' }}分钟回复率，其他未设置的群内员工回复了，不计入。该设置仅对群内成员生效\n                    </div>\n                    <div v-if=\"config.satff_radio == 1\" class=\"mt10\">\n                        <a-button @click=\"selectStaff\">选择员工</a-button>\n                        <div class=\"fx-ac\" style=\"flex-wrap: wrap;width: 891px;\">\n                            <a-tag\n                                v-for=\"(item, index) in staffList\"\n                                :key=\"item.staff_id\"\n                                class=\"staff-tag\"\n                                closable\n                                @close=\"staffDel(index)\"\n                            >\n                                {{ item.name }}\n                            </a-tag>\n                        </div>\n                    </div>\n                </div>\n            </a-form-item>\n        </a-card>\n        <a-card :bordered=\"false\">\n            <template #title>\n                <div class=\"card-title\">\n                    <span class=\"title\">群聊未回复规则</span>\n                    <span\n                        class=\"desc\">设置未回复规则后，群聊中未回复聊天数和未回复聊天占比将根据此规则进行统计</span>\n                </div>\n            </template>\n            <div class=\"main-body\">\n                <a-alert type=\"info\"\n                         :show-icon=\"false\"\n                         banner\n                         message=\"群聊时，客户发送的最后一句话成功匹配到关键词或消息类型匹配为选中类型，且员工没有回复，不算作未回复消息\"></a-alert>\n                <a-form-item label=\"全匹配\" class=\"mt24\">\n                    <a-input placeholder=\"请输入自定义匹配关键词\"\n                             :max-length=\"20\"\n                             v-model:value=\"input.group_keywords_full\"\n                             @keydown.enter=\"inputHandle('group_keywords','full')\"\n                             @blur=\"inputHandle('group_keywords','full')\"\n                             style=\"width: 360px\"/>\n                    <div class=\"keyword-tags\">\n                        <a-tag v-for=\"(keyword,i) in config.group_keywords.full\"\n                               class=\"zm-customize-tag\"\n                               style=\"margin: 8px 8px 0 0;\"\n                               :closable=\"MODE != 2\"\n                               @close=\"(e) => removeTag('group_keywords','full',i,e)\"\n                               :key=\"i\">{{ keyword }}\n                        </a-tag>\n                    </div>\n                </a-form-item>\n                <a-form-item label=\"半匹配\">\n                    <a-input placeholder=\"请输入自定义匹配关键词\"\n                             :max-length=\"20\"\n                             v-model:value=\"input.group_keywords_half\"\n                             @keydown.enter=\"inputHandle('group_keywords','half')\"\n                             @blur=\"inputHandle('group_keywords','half')\"\n                             style=\"width: 360px\"/>\n                    <div class=\"keyword-tags\">\n                        <a-tag v-for=\"(keyword,i) in config.group_keywords.half\"\n                               class=\"zm-customize-tag\"\n                               style=\"margin: 8px 8px 0 0;\"\n                               closable\n                               @close=\"(e) => removeTag('group_keywords','half',i,e)\"\n                               :key=\"i\">{{ keyword }}\n                        </a-tag>\n                    </div>\n                    <a-checkbox class=\"mt24\" v-model:checked=\"config.other_effect\">群内其他员工回复也算作已回复\n                    </a-checkbox>\n                </a-form-item>\n                <a-form-item label=\"消息类型\" style=\"margin-bottom: 0;\">\n                    <a-checkbox-group v-model:checked=\"config.group_keywords.msg_type_filter\" @change=\"configChange\">\n                        <a-checkbox value=\"image\">图片</a-checkbox>\n                        <a-checkbox value=\"emoji_preg\">emoji</a-checkbox>\n                        <a-checkbox value=\"emotion\">表情包</a-checkbox>\n                    </a-checkbox-group>\n                </a-form-item>\n                <div class=\"zm-fixed-bottom-box\">\n                    <a-button type=\"primary\">保 存</a-button>\n                </div>\n            </div>\n        </a-card>\n    </div>\n</template>\n\n<script setup>\nimport {ref, reactive} from 'vue';\nimport MainLayout from \"@/components/mainLayout.vue\";\nimport TimesRange from \"@/components/tools/timesRange.vue\";\n\nconst timeRangeRef = ref(null)\nconst staffList = ref([])\nconst input = reactive({\n    single_keywords_full: \"\",\n    single_keywords_half: \"\",\n    group_keywords_full: \"\",\n    group_keywords_half: \"\",\n    staff_single_keywords_full: \"\",\n    staff_single_keywords_half: \"\",\n})\nconst config = reactive({\n    _id: \"\",\n    corp_id: \"\",\n    owner_id: \"\",\n    group_at_msg_reply_sec: 3,\n    msg_reply_sec: 3,\n    single_keywords: {\n        full: [],\n        half: [],\n        msg_type_filter: [],\n    },\n    group_keywords: {\n        full: [],\n        half: [],\n        msg_type_filter: [],\n    },\n    staff_single_keywords: {\n        full: [],\n        half: [],\n    },\n    other_effect: true,\n    group_other_effect: false, // 0:未选中，1:选中 需要转换成布尔渲染\n    group_staff_user_json: [], // 给后端的是json字符串，包含员工id，name\n    satff_radio: 2,\n    staffIds: []\n})\n\nfunction configChange() {\n\n}\n\nfunction selectStaff() {\n}\n\nfunction staffDel() {\n}\n\nfunction configFilled(config) {\n    // for (let key in this.config) {\n    //     if (typeof this.config[key] === \"object\" && !config[key]) {\n    //         continue\n    //     }\n    //     this.config[key] = config[key]\n    // }\n}\n\nfunction inputHandle(field, type) {\n    // let inputFiled\n    // try {\n    //     inputFiled = field + \"_\" + type\n    //     let val = this.input[inputFiled].trim()\n    //     if (!val) {\n    //         return\n    //     }\n    //     if (this.config[field][type].length > 19) {\n    //         throw \"每项最多输入20个关键词\"\n    //     }\n    //     if (this.config[field].half.includes(val)\n    //         || this.config[field].full.includes(val)) {\n    //         throw \"请勿重复输入关键字\"\n    //     } else {\n    //         this.config[field][type].push(val)\n    //     }\n    // } catch (e) {\n    //     this.$message.error(e)\n    // }\n    // this.input[inputFiled] = \"\"\n    // this.configChange()\n}\n\nfunction removeTag(field, type, index, e) {\n    // e.preventDefault();\n    // this.config[field][type].splice(index, 1)\n    // this.configChange()\n}\n</script>\n\n<style scoped lang=\"less\">\n@import \"rule\";\n</style>\n","import script from \"./groupRule.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./groupRule.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./groupRule.vue?vue&type=style&index=0&id=3e4d5980&scoped=true&lang=less\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3e4d5980\"]])\n\nexport default __exports__","<template>\n    <MainLayout>\n        <template #navbar>\n            <a-tabs v-model:active-key=\"activeTab\"\n                    @change=\"mainTabChange\"\n                    class=\"zm-nav-tabs\">\n                <a-tab-pane key=\"private\" tab=\"单聊统计\"/>\n                <a-tab-pane key=\"group\" tab=\"群聊统计\"/>\n            </a-tabs>\n        </template>\n\n        <PrivateRule v-if=\"activeTab === 'private'\"/>\n        <GroupRule v-else-if=\"activeTab === 'group'\"/>\n    </MainLayout>\n</template>\n\n<script setup>\nimport {ref} from 'vue';\nimport MainLayout from \"@/components/mainLayout.vue\";\nimport PrivateRule from \"@/views/sessionStatistics/compoments/privateRule.vue\";\nimport GroupRule from \"@/views/sessionStatistics/compoments/groupRule.vue\";\n\nconst activeTab = ref('private')\nfunction mainTabChange() {\n\n}\n</script>\n\n<style scoped lang=\"less\">\n\n</style>\n","import script from \"./rule.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./rule.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["PlusCircleOutlined","_objectSpread","target","i","arguments","length","source","Object","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","value","defineProperty","configurable","writable","props","context","p","attrs","_createVNode","AntdIcon","PlusCircleOutlinedSvg","displayName","inheritAttrs","emit","__emit","__props","timeItemStruct","times","dataItemStruct","week","ranges","data","ref","add","limit","push","copyObj","remove","index","disabled","splice","change","addTimeRange","record","timeLimit","removeTimeRange","disabledWeek","item","includes","__exports__","timeRangeRef","staffList","input","reactive","single_keywords_full","single_keywords_half","group_keywords_full","group_keywords_half","staff_single_keywords_full","staff_single_keywords_half","config","_id","corp_id","owner_id","group_at_msg_reply_sec","msg_reply_sec","single_keywords","full","half","msg_type_filter","group_keywords","staff_single_keywords","other_effect","group_other_effect","group_staff_user_json","satff_radio","staffIds","configChange","selectStaff","staffDel","inputHandle","field","type","removeTag","e","activeTab","mainTabChange"],"sourceRoot":""}