"use strict";(self["webpackChunkzmwk_session_archive"]=self["webpackChunkzmwk_session_archive"]||[]).push([[929],{4288:function(e,t,a){a.d(t,{A:function(){return c}});var l=a(6768),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 708c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm62.9-219.5a48.3 48.3 0 00-30.9 44.8V620c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-21.5c0-23.1 6.7-45.9 19.9-64.9 12.9-18.6 30.9-32.8 52.1-40.9 34-13.1 56-41.6 56-72.7 0-44.1-43.1-80-96-80s-96 35.9-96 80v7.6c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V420c0-39.3 17.2-76 48.4-103.3C430.4 290.4 470 276 512 276s81.6 14.5 111.6 40.7C654.8 344 672 380.7 672 420c0 57.8-38.1 109.8-97.1 132.5z"}}]},name:"question-circle",theme:"filled"},o=n,r=a(4827);function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},l=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){u(e,t,a[t])}))}return e}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=function(e,t){var a=s({},e,t.attrs);return(0,l.bF)(r.A,s({},a,{icon:o}),null)};i.displayName="QuestionCircleFilled",i.inheritAttrs=!1;var c=i},6010:function(e,t,a){a.d(t,{A:function(){return c}});var l=a(6768),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},o=n,r=a(4827);function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},l=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){u(e,t,a[t])}))}return e}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=function(e,t){var a=s({},e,t.attrs);return(0,l.bF)(r.A,s({},a,{icon:o}),null)};i.displayName="RedoOutlined",i.inheritAttrs=!1;var c=i},1833:function(e,t,a){a.r(t),a.d(t,{default:function(){return A}});var l=a(6768),n=a(4232),o=a(144),r=a(1387),s=a(1576),u=a.n(s),i=a(7694),c=a(6010),d=a(4288),f=a(1745);const _={class:"zm-main-content"},v={key:0,class:"zm-tip-info"},k={class:"filter-box mt16"},m={class:"filter-item"},p={class:"item-body"},y={class:"filter-item"},g={class:"item-body"},b={class:"filter-item"},h={class:"zm-flex-between"},C={class:"filter-box"},L={key:0,class:"filter-item",style:{"margin-bottom":"0"}},w={class:"item-body"},Y={class:"table-box mt16"},x=["onClick"],F=["onClick"],W=["onClick"],X=["onClick"],I=["onClick"];var O={__name:"group",setup(e){const t=(0,r.rd)(),a=[{title:"所属员工",dataIndex:"name",width:120},{dataIndex:"group_no",width:80},{dataIndex:"active_group_no",width:80},{dataIndex:"staff_msg_no",width:80},{dataIndex:"no_reply_group_no",width:100},{dataIndex:"at_rate_avg",width:100},{dataIndex:"rate_avg",width:80}],s=(u()(),{year:1,month:1,dateType:1,date:void 0,staffs:[],order:""}),O=(0,o.KR)(!1),R=(0,o.KR)(!1),K=(0,o.KR)(!1),A=(0,o.KR)([]),E=(0,o.KR)(""),S=(0,o.KR)(1),z=(0,o.KR)([]),D=(0,o.KR)(!0),M=(0,o.Kh)({...s}),j=(0,o.Kh)({group_at_msg_reply_sec:"",msg_reply_sec:"",last_stat_time:"",last_stat_date:""}),T=(0,o.Kh)({current:1,page:1,pageSize:10,total:0,pageSizeOptions:["10","20","50","100"],showQuickJumper:!0,showSizeChanger:!0}),N=(0,o.Kh)({visible:!1,saving:!1,staffs:[]});async function Q(){U(),G(),P()}function P(){}function U(){M.year=1,M.month=Number(u()().format("MM"))}function V(){M=Object.assign(data,s),S.value+=1,U(),$()}function $(){T.current=1,G()}function G(){let e=B();D.value=q(e.date_no)}function q(e){try{let t=u()(e).weekday();return statConfig.weeks.includes(t)}catch(t){}return!0}function B(){let e={page:T.current,size:T.pageSize};switch(M.dateType){case 1:e.date_no=u()().format("YYYYMMDD");break;case 2:e.date_no=u()().subtract(1,"days").format("YYYYMMDD");break;case 0:M.date&&(e.date_no=M.date.format("YYYYMMDD"));break}return M.staffs.length&&(e.user_ids=M.staffs.map((e=>e.user_id)).toString()),M.order&&(e.order=M.order),e}function J(e,t,a){}function H(e){let t=1==M.year?Number(moment().format("YYYY")):Number(moment().subtract(1,"year").format("YYYY"));return Number(e.format("YYYY"))!=t||Number(e.format("MM"))!=M.month}function Z(){M.dateType=0,$()}function ee(){0===M.dateType?($refs.customDateRef.focus(),M.date=moment(),$()):(M.date=void 0,U(),$())}function te(){let e=1==M.year?Number(moment().format("YYYY")):Number(moment().subtract(1,"year").format("YYYY")),t=M.month<10?"0"+M.month:M.month;M.date=moment(`${e}-${t}-01`),M.dateType=0,$()}function ae(e,a){const l=t.resolve({path:e,query:{staff_user_id:a.staff_user_id,filter_date:B().date_no||"",group_at_msg_reply_sec:j.group_at_msg_reply_sec,msg_reply_sec:j.msg_reply_sec}});window.open(l.href,"_blank")}function le(){R.value||(R.value=!0)}function ne(){if(T.total<1)return i.Ay.error("暂无数据");K.value=!0;let e=B();e.size=5e3}function oe(){N.staffs=this.statStaffs,N.visible=!0}function re(){N.saving=!0}return(0,l.sV)((()=>{Q()})),(e,t)=>{const r=(0,l.g2)("a-select-option"),s=(0,l.g2)("a-select"),u=(0,l.g2)("a-radio-button"),i=(0,l.g2)("a-radio-group"),R=(0,l.g2)("a-date-picker"),S=(0,l.g2)("a-button"),Q=(0,l.g2)("a-tooltip"),P=(0,l.g2)("a-table"),U=(0,l.g2)("a-alert"),G=(0,l.g2)("a-modal");return(0,l.uX)(),(0,l.Wv)(f.A,{title:"群聊统计"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",_,[(0,l.Lk)("div",null,[(0,l.Lk)("a",{onClick:oe},"设置统计员工"),A.value.length>0?((0,l.uX)(),(0,l.CE)("span",v,"（已设置"+(0,n.v_)(A.value.length)+"名员工）",1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",k,[(0,l.Lk)("div",m,[t[7]||(t[7]=(0,l.Lk)("span",{class:"item-label"},"选择时间：",-1)),(0,l.Lk)("div",p,[(0,l.bF)(s,{value:M.year,"onUpdate:value":t[0]||(t[0]=e=>M.year=e),onChange:te,style:{width:"80px"}},{default:(0,l.k6)((()=>[(0,l.bF)(r,{value:1},{default:(0,l.k6)((()=>t[5]||(t[5]=[(0,l.eW)("今年")]))),_:1}),(0,l.bF)(r,{value:2},{default:(0,l.k6)((()=>t[6]||(t[6]=[(0,l.eW)("去年 ")]))),_:1})])),_:1},8,["value"]),(0,l.bF)(s,{value:M.month,"onUpdate:value":t[1]||(t[1]=e=>M.month=e),onChange:te,style:{width:"80px"}},{default:(0,l.k6)((()=>[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(12,(e=>(0,l.bF)(r,{value:e,key:e},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e)+"月 ",1)])),_:2},1032,["value"]))),64))])),_:1},8,["value"])])]),(0,l.Lk)("div",y,[t[11]||(t[11]=(0,l.Lk)("span",{class:"item-label"},"选择日期：",-1)),(0,l.Lk)("div",g,[(0,l.bF)(i,{checked:M.dateType,"onUpdate:checked":t[2]||(t[2]=e=>M.dateType=e),onChange:ee},{default:(0,l.k6)((()=>[(0,l.bF)(u,{value:1},{default:(0,l.k6)((()=>t[8]||(t[8]=[(0,l.eW)("今天")]))),_:1}),(0,l.bF)(u,{value:2},{default:(0,l.k6)((()=>t[9]||(t[9]=[(0,l.eW)("昨天")]))),_:1}),(0,l.bF)(u,{value:0},{default:(0,l.k6)((()=>t[10]||(t[10]=[(0,l.eW)("自定义")]))),_:1})])),_:1},8,["checked"]),(0,l.bF)(R,{ref:"customDateRef",style:{width:"160px"},class:"ml8",value:M.date,"onUpdate:value":t[3]||(t[3]=e=>M.date=e),onChange:Z,"disabled-date":H,format:"YYYY-MM-DD"},null,8,["value"])])]),t[14]||(t[14]=(0,l.Lk)("div",{class:"filter-item"},[(0,l.Lk)("span",{class:"item-label"},"所属员工："),(0,l.Lk)("div",{class:"item-body"})],-1)),(0,l.Lk)("div",b,[(0,l.bF)(S,{type:"primary",onClick:$},{default:(0,l.k6)((()=>t[12]||(t[12]=[(0,l.eW)("搜 索")]))),_:1}),(0,l.bF)(S,{onClick:V,class:"ml4"},{default:(0,l.k6)((()=>t[13]||(t[13]=[(0,l.eW)("重 置")]))),_:1})])]),(0,l.Lk)("div",h,[(0,l.Lk)("div",C,[1==M.dateType?((0,l.uX)(),(0,l.CE)("div",L,[t[16]||(t[16]=(0,l.Lk)("span",{class:"item-label",style:{width:"100px"}},"统计截止时间：",-1)),(0,l.Lk)("div",w,[(0,l.eW)((0,n.v_)(E.value||"--")+" ",1),(0,l.Lk)("a",{class:"ml16",onClick:le},[(0,l.bF)((0,o.R1)(c.A)),t[15]||(t[15]=(0,l.eW)(" 更新"))])])])):(0,l.Q3)("",!0)]),(0,l.bF)(S,{onClick:ne,loading:K.value},{default:(0,l.k6)((()=>t[17]||(t[17]=[(0,l.eW)("导出")]))),_:1},8,["loading"])]),(0,l.Lk)("div",Y,[(0,l.bF)(P,{loading:O.value,"data-source":z.value,columns:a,scroll:{x:1300},pagination:T,onChange:J},{headerCell:(0,l.k6)((({column:e})=>["group_no"===e.dataIndex?((0,l.uX)(),(0,l.Wv)(Q,{key:0},{title:(0,l.k6)((()=>t[18]||(t[18]=[(0,l.Lk)("span",null,"负责群：该员工所在的群聊数",-1),(0,l.Lk)("br",null,null,-1),(0,l.Lk)("span",null,"今日新增：今日新加入的群聊",-1)]))),default:(0,l.k6)((()=>[t[19]||(t[19]=(0,l.eW)(" 负责总群数/今日新增 ")),(0,l.bF)((0,o.R1)(d.A))])),_:1})):"active_group_no"===e.dataIndex?((0,l.uX)(),(0,l.Wv)(Q,{key:1},{title:(0,l.k6)((()=>t[20]||(t[20]=[(0,l.Lk)("span",null,"活跃群：客户发了消息的群",-1),(0,l.Lk)("br",null,null,-1),(0,l.Lk)("span",null,"回复群：活跃群聊中，回复了消息的群聊",-1)]))),default:(0,l.k6)((()=>[t[21]||(t[21]=(0,l.eW)(" 活跃群/回复群 ")),(0,l.bF)((0,o.R1)(d.A))])),_:1})):"staff_msg_no"===e.dataIndex?((0,l.uX)(),(0,l.Wv)(Q,{key:2},{title:(0,l.k6)((()=>t[22]||(t[22]=[(0,l.Lk)("span",null,"总消息：员工所在的群聊的全部员工发送的消息",-1),(0,l.Lk)("br",null,null,-1),(0,l.Lk)("span",null,"员工发送：员工所在的群聊中该员工发送的消息数",-1)]))),default:(0,l.k6)((()=>[t[23]||(t[23]=(0,l.eW)(" 总消息/员工发送 ")),(0,l.bF)((0,o.R1)(d.A))])),_:1})):"no_reply_group_no"===e.dataIndex?((0,l.uX)(),(0,l.Wv)(Q,{key:3,title:"员工所在的群聊活跃群聊中未回复消息的群聊数以及占比"},{default:(0,l.k6)((()=>[t[24]||(t[24]=(0,l.eW)(" 未回复/未回复率 ")),(0,l.bF)((0,o.R1)(d.A))])),_:1})):"at_rate_avg"===e.dataIndex?((0,l.uX)(),(0,l.Wv)(Q,{key:4,title:`${j.group_at_msg_reply_sec}分钟内回复的总轮次/群的总轮次之和，这里轮次是客户发起，员工回复算一轮`},{default:(0,l.k6)((()=>[(0,l.eW)(" @后"+(0,n.v_)(j.group_at_msg_reply_sec)+"分钟回复率 ",1),(0,l.bF)((0,o.R1)(d.A))])),_:1},8,["title"])):"rate_avg"===e.dataIndex?((0,l.uX)(),(0,l.Wv)(Q,{key:5,title:`${j.msg_reply_sec}分钟内回复的总轮次/群的总轮次之和，这里轮次是客户发起，所属员工回复算一轮`},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(j.msg_reply_sec)+"分钟回复率 ",1),(0,l.bF)((0,o.R1)(d.A))])),_:1},8,["title"])):(0,l.Q3)("",!0)])),bodyCell:(0,l.k6)((({column:a,text:o,record:r})=>["at_rate_avg"===a.dataIndex?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[D.value?((0,l.uX)(),(0,l.CE)("a",{key:1,onClick:e=>ae("/workQualityStat/replyRateDetail",r)},(0,n.v_)(o),9,x)):((0,l.uX)(),(0,l.Wv)(Q,{key:0,overlayClassName:"stat-config-overlay"},{title:(0,l.k6)((()=>[t[25]||(t[25]=(0,l.Lk)("div",null,"统计时间",-1)),(0,l.Lk)("div",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.statConfig.descText,((e,t)=>((0,l.uX)(),(0,l.CE)("div",null,(0,n.v_)(e),1)))),256))])])),default:(0,l.k6)((()=>[t[26]||(t[26]=(0,l.Lk)("span",{class:"no-stat-tag"},"未统计",-1))])),_:1}))],64)):"rate_avg"===a.dataIndex?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[D.value?((0,l.uX)(),(0,l.CE)("a",{key:1,onClick:e=>ae("/workQualityStat/replyRateDetail",r)},(0,n.v_)(o),9,F)):((0,l.uX)(),(0,l.Wv)(Q,{key:0,overlayClassName:"stat-config-overlay"},{title:(0,l.k6)((()=>[t[27]||(t[27]=(0,l.Lk)("div",null,"统计时间",-1)),(0,l.Lk)("div",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.statConfig.descText,((e,t)=>((0,l.uX)(),(0,l.CE)("div",null,(0,n.v_)(e),1)))),256))])])),default:(0,l.k6)((()=>[t[28]||(t[28]=(0,l.Lk)("span",{class:"no-stat-tag"},"未统计",-1))])),_:1}))],64)):"groupTotal"===a.dataIndex?((0,l.uX)(),(0,l.CE)("a",{key:2,onClick:e=>ae("/workQualityStat/staffAllOrTodayGroup",r)},(0,n.v_)(o)+" / "+(0,n.v_)(r.today_allot),9,W)):"active_group_no"===a.dataIndex?((0,l.uX)(),(0,l.CE)("a",{key:3,onClick:e=>ae("/workQualityStat/staffActiveReplyGroup",r)},(0,n.v_)(o)+" / "+(0,n.v_)(r.reply_group_no),9,X)):"staff_msg_no"===a.dataIndex?((0,l.uX)(),(0,l.CE)(l.FK,{key:4},[(0,l.eW)((0,n.v_)(r.all_stf_msg_no)+" / "+(0,n.v_)(r.staff_msg_no),1)],64)):"no_reply_group_no"===a.dataIndex?((0,l.uX)(),(0,l.CE)(l.FK,{key:5},[(0,l.Lk)("a",{onClick:e=>ae("/workQualityStat/staffUnreplyGroup",r)},(0,n.v_)(o),9,I),(0,l.eW)(" / "+(0,n.v_)(r.noreply_rate),1)],64)):(0,l.Q3)("",!0)])),_:1},8,["loading","data-source","pagination"])])]),(0,l.bF)(G,{title:"添加统计员工",modelValue:N.visible,"onUpdate:modelValue":t[4]||(t[4]=e=>N.visible=e),onOk:re,"confirm-loading":N.saving},{default:(0,l.k6)((()=>[(0,l.bF)(U,{type:"info",message:"添加统计的员工若取消统计，当天的统计结果会被删除，取消的时间内之后都不会统计，重新添加从添加的那天才统计"}),t[29]||(t[29]=(0,l.Lk)("div",{class:"stat-staff-modal mt16"},[(0,l.Lk)("div",{class:"form-item"},[(0,l.Lk)("span",{class:"item-tit"},"统计员工：")])],-1))])),_:1},8,["modelValue","confirm-loading"])])),_:1})}}},R=a(1241);const K=(0,R.A)(O,[["__scopeId","data-v-410452ba"]]);var A=K}}]);
//# sourceMappingURL=929.3d9db966.js.map