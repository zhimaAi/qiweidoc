{"version":3,"file":"js/328.dfbd1343.js","mappings":"2nKAmEA,MAAMA,GAAUC,EAAAA,EAAAA,IAAI,CAChB,CACIC,MAAO,OACPC,UAAW,YACXC,MAAO,KAEX,CACIF,MAAO,MACPC,UAAW,YACXC,MAAO,KAEX,CACIF,MAAO,KACPC,UAAW,QACXC,MAAO,KAEX,CACIF,MAAO,MACPC,UAAW,eACXC,MAAO,KAEX,CACIF,MAAO,OACPC,UAAW,cACXC,MAAO,KAEX,CACIF,MAAO,KACPC,UAAW,KACXC,MAAO,OAGTC,GAAUJ,EAAAA,EAAAA,KAAI,GACdK,GAAOL,EAAAA,EAAAA,IAAI,IACXM,GAAQN,EAAAA,EAAAA,IAAI,IACZO,GAAaC,EAAAA,EAAAA,IAAS,CACxBC,UAAMC,IAGJC,GAAaH,EAAAA,EAAAA,IAAS,CACxBI,QAAS,EACTC,SAAU,GACVC,MAAO,EACPC,gBAAiB,CAAC,KAAM,KAAM,KAAM,OACpCC,iBAAiB,EACjBC,iBAAiB,KAGrBC,EAAAA,EAAAA,KAAU,KACNC,GAAU,IAGd,MAAMC,EAASA,KACXT,EAAWC,QAAU,EACrBO,GAAU,EAGRA,EAAWA,KACbf,EAAQiB,OAAQ,CAAG,EAGjBC,EAAcC,IAChBZ,EAAWC,QAAUW,EAAEX,QACvBD,EAAWE,SAAWU,EAAEV,SACxBM,GAAU,EAGRK,EAASC,IACXC,EAAAA,EAAMC,QAAQ,CACV1B,MAAO,KACP2B,QAAS,YACTC,KAAMA,KACgBC,EAAAA,GAAQ1B,QAAQ,OAAO,GAE/C,EAGA2B,EAAWN,GACO,GAAhBA,EAAOO,MACAF,EAAAA,GAAQG,MAAM,SAEA,KAArBR,EAAOS,UACAJ,EAAAA,GAAQG,MAAM,aADzB,EAMEE,EAAMA,CAACV,EAAQW,KACjBV,EAAAA,EAAMC,QAAQ,CACV1B,MAAO,KACP2B,QAAS,UACTC,KAAMA,KACgBC,EAAAA,GAAQ1B,QAAQ,OAAO,GAE/C,E,0qEC3JN,MAAMiC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://zmwk_session_archive/./src/views/systemctl/fileExport.vue","webpack://zmwk_session_archive/./src/views/systemctl/fileExport.vue?f2b1"],"sourcesContent":["<template>\n    <MainLayout title=\"文件导出记录\">\n        <div class=\"zm-main-content\">\n            <a-alert type=\"info\" show-icon\n                     message=\"您可以在这里查看您的导出任务，并下载导出文件；文件导出后系统只会保留7天，7天后将自动删除，请及时下载文件\"></a-alert>\n            <div class=\"zm-filter-box mt24\">\n                <div class=\"zm-filter-item\">\n                    <div class=\"zm-filter-label\">导出类型：</div>\n                    <a-select v-model:value=\"filterData.type\"\n                              placeholder=\"请选择导出类型\"\n                              style=\"width: 240px\"\n                              @change=\"search\">\n                        <a-select-option\n                            v-for=\"item in types\"\n                            :value=\"item.value\"\n                            :key=\"item.value\">\n                            {{ item.title }}\n                        </a-select-option>\n                    </a-select>\n                </div>\n            </div>\n            <a-table class=\"mt24\"\n                     :dataSource=\"list\"\n                     :columns=\"columns\"\n                     :pagination=\"pagination\"\n                     @change=\"tableChange\">\n                <template #bodyCell=\"{column, text, record, index}\">\n                    <a-tooltip v-if=\"column.dataIndex === 'file_name'\" :title=\"text\">\n                        <div class=\"zm-line-clamp2\">{{ text }}</div>\n                    </a-tooltip>\n                    <template v-else-if=\"column.dataIndex === 'state'\">\n                        <div class=\"status\" v-if=\"text === 1\">\n                            <img src=\"@/assets/image/status-wait.png\"/> 排队中\n                        </div>\n                        <div class=\"status\" v-else-if=\"text === 2\">\n                            <img src=\"@/assets/image/status-run.png\"/>导出中\n                        </div>\n                        <div class=\"status\" v-else-if=\"text === 3\">\n                            <img src=\"@/assets/image/status-ok.png\"/> 已完成\n                        </div>\n                        <div class=\"status\" v-else-if=\"text === 4\">\n                            <img src=\"@/assets/image/status-expired.png\"/> 已过期\n                        </div>\n                        <div class=\"status\" v-else-if=\"text === 5\">\n                            <img src=\"@/assets/image/status-cancel.png\"/> 已取消\n                        </div>\n                        <div class=\"status\" v-else-if=\"text === 6\">\n                            <img src=\"@/assets/image/status-expired.png\"/> 导出失败\n                        </div>\n                        <span v-else>--</span>\n                    </template>\n                    <template v-else-if=\"column.dataIndex === 'id'\">\n                        <a class=\"mr16\" v-if=\"record.state === 3\" @click=\"download(record)\">下载文件</a>\n                        <a class=\"mr16\" v-if=\"![1,2].includes(record.state)\" @click=\"del(record,index)\">删除记录</a>\n                        <a v-else @click=\"cancel(record)\">取消导出</a>\n                    </template>\n                </template>\n            </a-table>\n        </div>\n    </MainLayout>\n</template>\n\n<script setup>\nimport {onMounted, ref, reactive} from 'vue';\nimport {Modal, message} from 'ant-design-vue';\nimport MainLayout from \"@/components/mainLayout.vue\";\n\nconst columns = ref([\n    {\n        title: \"导出来源\",\n        dataIndex: \"type_text\",\n        width: 300,\n    },\n    {\n        title: \"文件名\",\n        dataIndex: \"file_name\",\n        width: 320,\n    },\n    {\n        title: \"状态\",\n        dataIndex: \"state\",\n        width: 200,\n    },\n    {\n        title: \"操作人\",\n        dataIndex: \"creator_name\",\n        width: 150,\n    },\n    {\n        title: \"导出时间\",\n        dataIndex: \"create_time\",\n        width: 200,\n    },\n    {\n        title: \"操作\",\n        dataIndex: \"id\",\n        width: 180,\n    },\n])\nconst loading = ref(false)\nconst list = ref([])\nconst types = ref([])\nconst filterData = reactive({\n    type: undefined,\n})\n\nconst pagination = reactive({\n    current: 1,\n    pageSize: 10,\n    total: 0,\n    pageSizeOptions: ['10', '20', '50', '100'],\n    showQuickJumper: true,\n    showSizeChanger: true\n})\n\nonMounted(() => {\n    loadData()\n})\n\nconst search = () => {\n    pagination.current = 1\n    loadData()\n}\n\nconst loadData = () => {\n    loading.value = true\n}\n\nconst tableChange = p => {\n    pagination.current = p.current\n    pagination.pageSize = p.pageSize\n    loadData()\n}\n\nconst cancel = record => {\n    Modal.confirm({\n        title: '提示',\n        content: '确认取消此导出任务',\n        onOk: () => {\n            const loadClose = message.loading('正在取消')\n        }\n    })\n}\n\nconst download = record => {\n    if (record.state != 3) {\n        return message.error('未导出完成')\n    }\n    if (record.file_path === \"\") {\n        return message.error('导出异常')\n    }\n    //window.location.href = record.file_path\n}\n\nconst del = (record, index) => {\n    Modal.confirm({\n        title: '提示',\n        content: '确认删除此记录',\n        onOk: () => {\n            const loadClose = message.loading('正在删除')\n        }\n    })\n}\n</script>\n\n<style scoped lang=\"less\">\n.status {\n    font-size: 14px;\n    font-weight: 400;\n    color: rgba(0, 0, 0, 0.65);\n    display: flex;\n    align-items: center;\n    white-space: nowrap;\n\n    img {\n        width: 16px;\n        height: 16px;\n        margin-right: 4px;\n    }\n}\n</style>\n","import script from \"./fileExport.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./fileExport.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./fileExport.vue?vue&type=style&index=0&id=92ea5c6a&scoped=true&lang=less\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-92ea5c6a\"]])\n\nexport default __exports__"],"names":["columns","ref","title","dataIndex","width","loading","list","types","filterData","reactive","type","undefined","pagination","current","pageSize","total","pageSizeOptions","showQuickJumper","showSizeChanger","onMounted","loadData","search","value","tableChange","p","cancel","record","Modal","confirm","content","onOk","message","download","state","error","file_path","del","index","__exports__"],"sourceRoot":""}