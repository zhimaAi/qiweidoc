{"version":3,"file":"js/746.dd6d8d46.js","mappings":"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","sources":["webpack://zmwk_session_archive/./node_modules/vue-loader/dist/exportHelper.js","webpack://zmwk_session_archive/./src/components/mainFooter.vue","webpack://zmwk_session_archive/./src/components/mainFooter.vue?2da5","webpack://zmwk_session_archive/./src/components/mainHeader.vue","webpack://zmwk_session_archive/./src/components/mainHeader.vue?2300","webpack://zmwk_session_archive/./src/utils/cookie.js","webpack://zmwk_session_archive/./src/views/login.vue","webpack://zmwk_session_archive/./src/views/login.vue?6051"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","<template>\n    <div id=\"_footer\" class=\"_main-footer normal hide\">\n        <div class=\"copyright\">Copyright © 2021, 芝麻小事网络科技（武汉）有限公司</div>\n    </div>\n</template>\n\n<script setup>\nimport {onMounted} from \"vue\";\n\nonMounted(() => {\n    window.addEventListener('load', adjustFooterPosition);\n    window.addEventListener('resize', adjustFooterPosition);\n    setTimeout(() => {\n        adjustFooterPosition()\n        document.getElementById('_footer').classList.remove('hide')\n    }, 1000)\n})\n\nfunction adjustFooterPosition() {\n    const contentHeight = document.body.scrollHeight;\n    const viewportHeight = window.innerHeight;\n    const footer = document.getElementById('_footer');\n    if (!footer) {\n        return\n    }\n    // 如果内容高度超过视口高度的，则正常显示，否则固定到底部\n    if (contentHeight > viewportHeight) {\n        footer.classList.add('normal');\n    } else {\n        footer.classList.remove('normal');\n    }\n}\n</script>\n\n<style scoped lang=\"less\">\n._main-footer {\n    position: fixed;\n    width: 100%;\n    left: 0;\n    bottom: 24px;\n    text-align: center;\n\n    &.hide {\n        opacity: 0;\n    }\n\n    &.normal {\n        position: relative;\n        margin-top: 48px;\n    }\n\n    .copyright {\n        color: #8c8c8c;\n        font-size: 12px;\n        font-weight: 400;\n    }\n}\n</style>\n","import script from \"./mainFooter.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./mainFooter.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./mainFooter.vue?vue&type=style&index=0&id=6e41ce21&scoped=true&lang=less\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6e41ce21\"]])\n\nexport default __exports__","<template>\n    <div class=\"_main-header\" :style=\"style\">\n        <div class=\"logo-box\">\n            <img src=\"@/assets/logo.png\" class=\"logo\"/>\n        </div>\n        <div class=\"right-header-nav\">\n            <div v-if=\"showMenus\" class=\"my-shadow\"></div>\n            <div>\n                <div v-if=\"showMenus\" class=\"menus-box\">\n                    <div class=\"menu-item active\">会话质检</div>\n                </div>\n            </div>\n            <a-dropdown v-if=\"loginInfo.id > 0\">\n                <div class=\"user-info-box\">\n                    <img src=\"@/assets/default-avatar.png\" class=\"avatar\"/>\n                    <span class=\"ml4\">{{ loginInfo.userid }}</span>\n                    <DownOutlined class=\"ml4\"/>\n                </div>\n                <template #overlay>\n                    <a-menu>\n                        <a-menu-item></a-menu-item>\n                        <a-menu-item>\n                            <div class=\"text-center\" @click=\"logout\">\n                               <a>退出登录</a>\n                            </div>\n                        </a-menu-item>\n                        <a-menu-item></a-menu-item>\n                    </a-menu>\n                </template>\n            </a-dropdown>\n        </div>\n    </div>\n</template>\n\n<script setup>\nimport {computed} from 'vue';\nimport {useStore} from 'vuex';\nimport {Modal, message} from 'ant-design-vue';\nimport {DownOutlined} from '@ant-design/icons-vue';\nimport {logoutHandle} from \"@/utils/tools\";\n\nconst props = defineProps({\n    background: String,\n    showMenus: {\n        type: Boolean,\n        default: false\n    },\n})\n\nconst store = useStore()\nconst loginInfo = computed(() => {\n    return store.getters.getUserInfo\n})\n\nconst style = computed(() => {\n    return {\n        background: props.background,\n    }\n})\n\nconst logout = () => {\n    Modal.confirm({\n        title: '提示',\n        content: '确认退出当前登录账户？',\n        onOk: () => {\n            message.loading('正在退出...')\n            setTimeout(() => {\n                message.destroy()\n                logoutHandle()\n            }, 1000)\n        }\n    })\n}\n</script>\n\n<style scoped lang=\"less\">\n._main-header {\n    display: flex;\n    align-items: center;\n    position: fixed;\n    z-index: 99;\n    top: 0;\n    left: 0;\n    width: 100%;\n    background: #E6EFFF;\n    box-shadow: 0 2px 4px 1px rgba(0, 0, 0, 0.12);\n\n    .logo-box {\n        display: flex;\n        width: 256px;\n        flex-shrink: 0;\n\n        .logo {\n            height: 52px;\n        }\n    }\n\n    .right-header-nav {\n        flex: 1;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding-left: 24px;\n        position: relative;\n\n        .my-shadow {\n            position: absolute;\n            width: 3px;\n            height: 52px;\n            left: -4px;\n            box-shadow: 5px 0 10px rgba(0, 0, 0, 0.3);\n            background: #f6f7fb;\n            top: -10px;\n        }\n\n        .menus-box {\n            display: flex;\n            align-items: center;\n\n            .menu-item {\n                width: 98px;\n                height: 36px;\n                margin-right: 25px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                cursor: pointer;\n                font-size: 16px;\n                font-weight: 400;\n                color: rgba(0, 0, 0, 0.85);\n                border-radius: 4px;\n\n                &.active {\n                    background: rgba(36, 117, 252, 0.2);\n                    color: #2475fc;\n                    font-weight: 600;\n                }\n\n                &:not(.active):hover {\n                    background: rgba(0, 0, 0, 0.04);\n                    color: #2475fc;\n                }\n            }\n        }\n\n        .user-info-box {\n            display: flex;\n            align-items: center;\n            cursor: pointer;\n            color: #595959;\n            font-size: 14px;\n            font-weight: 400;\n            margin: 0 16px;\n\n            .avatar {\n                width: 24px;\n                height: 24px;\n                border-radius: 4px;\n            }\n        }\n    }\n}\n</style>\n","import script from \"./mainHeader.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./mainHeader.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./mainHeader.vue?vue&type=style&index=0&id=5be8bb28&scoped=true&lang=less\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5be8bb28\"]])\n\nexport default __exports__","const USER_INFO_KEY = 'zm:session:archive:login:user';\n\n// 定义一个Cookie对象\nvar Cookie = {\n    // 设置cookie\n    set: function(name, value, expire) {\n      var cookie = name + \"=\" + encodeURIComponent(value);\n      if (expire) {\n        cookie += \"; expires=\" + expire.toUTCString();\n      }\n      document.cookie = cookie;\n    },\n\n    // 获取cookie\n    get: function(name) {\n      var cookies = document.cookie.split(';');\n      for (var i = 0; i < cookies.length; i++) {\n        var parts = cookies[i].split('=');\n        if (parts[0].trim() === name) {\n          return decodeURIComponent(parts[1]);\n        }\n      }\n      return '';\n    },\n\n    // 指定域名存储\n    setCookieAcrossSubdomains(name, value, days, domain) {\n        var expires = \"\";\n        if (days) {\n            var date = new Date();\n            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n            expires = \"; expires=\" + date.toUTCString();\n        }\n        document.cookie = name + \"=\" + (value || \"\") + expires + \"; domain=\" + domain + \"; path=/\";\n    },\n\n    // 删除cookie\n    remove: function(name) {\n      this.set(name, '', new Date(0));\n    }\n};\n\nfunction formatLocation (domain) {\n    // zhimahuihua.com\n    // demo.zhimahuihua.com\n    if (/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\\.[a-zA-Z0-9]{2,}$/.test(domain)) {\n        // 如果是一级域名，则添加点\n        return '.' + domain;\n    } else {\n        // 取第二个.后面的内容\n        return domain.match(/^[^.]*(.*)/)[1]\n    }\n}\n\nexport function setCookieAcrossSubdomain(data) {\n    Cookie.setCookieAcrossSubdomains(USER_INFO_KEY, data, 1, formatLocation(window.location.host))\n}\n","<template>\n    <div class=\"_main-container\">\n        <MainHeader/>\n        <div class=\"main-content\">\n            <div class=\"left-box\">\n                <img src=\"@/assets/login-cover.png\" class=\"cover\"/>\n            </div>\n            <div class=\"right-box\" v-if=\"isWxLogin\">\n                <div class=\"right-icon-box\">\n                    <div class=\"login-tip-top\">\n                        使用密码登录\n                        <img class=\"login-tip-top-icon\" src=\"@/assets/svg/login-tips-triangle.svg\" />\n                    </div>\n                    <img class=\"right-check\" src=\"@/assets/user-login.svg\" @click=\"onChangeLogin('account')\" />\n                </div>\n                <div id=\"ww_login\"></div>\n            </div>\n            <div class=\"right-box\" v-else>\n                <div class=\"right-icon-box\">\n                    <div class=\"login-tip-top\">\n                        扫码登录更便捷\n                        <img class=\"login-tip-top-icon\" src=\"@/assets/svg/login-tips-triangle.svg\" />\n                    </div>\n                    <img class=\"right-check\" src=\"@/assets/wx-login.svg\" @click=\"onChangeLogin('wx')\" />\n                </div>\n                <div class=\"sign-in\">\n                    <!-- Sign In Form -->\n                    <h2 class=\"login-title\">密码登录</h2>\n                    <a-form\n                        class=\"login-form\"\n                        :model=\"formState\"\n                        name=\"basic\"\n                        autocomplete=\"off\"\n                        @finish=\"onFinish\"\n                    >\n                        <a-form-item\n                            name=\"username\"\n                            class=\"usernames\"\n                            :rules=\"[{ required: true, message: '请输入账号' }]\"\n                        >\n                            <a-input class=\"login-item\" v-model:value=\"formState.username\" autocomplete=\"off\" placeholder=\"请输入账号\">\n                                <template #prefix>\n                                    <img class=\"login-input-icon\" src=\"@/assets/svg/user.svg\" />\n                                </template>\n                            </a-input>\n                        </a-form-item>\n\n                        <a-form-item\n                            name=\"password\"\n                            :rules=\"[{ required: true, message: '请输入密码' }]\"\n                        >\n                            <a-input-password class=\"login-item\" v-model:value=\"formState.password\" autocomplete=\"off\" type=\"password\" placeholder=\"请输入密码\">\n                                <template #prefix>\n                                    <img class=\"login-input-icon\" src=\"@/assets/svg/password.svg\" />\n                                </template>\n                            </a-input-password>\n                        </a-form-item>\n\n                        <a-form-item>\n                            <a-button class=\"login-btn\" type=\"primary\" block html-type=\"submit\">登录</a-button>\n                            <div class=\"login-tip\">暂无账号？可扫码登录后设置</div>\n                        </a-form-item>\n                    </a-form>\n                    <!-- / Sign In Form -->\n                </div>\n            </div>\n        </div>\n        <MainFooter/>\n    </div>\n</template>\n\n<script setup>\nimport {onMounted, getCurrentInstance, ref, reactive} from 'vue';\nimport {useRouter} from 'vue-router';\nimport {useStore} from 'vuex';\nimport MainHeader from \"@/components/mainHeader.vue\";\nimport MainFooter from \"@/components/mainFooter.vue\";\nimport {checkInit, getCurrentCorp, getCurrentUser, loginByCode, loginByAccount} from \"@/api/auth-login\";\nimport {setAuthToken, setCorpInfo, setUserInfo} from \"@/utils/cache\";\nimport { UserOutlined, LockOutlined } from '@ant-design/icons-vue';\nimport {setCookieAcrossSubdomain} from \"@/utils/cookie\";\n\nconst {proxy} = getCurrentInstance();\nconst router = useRouter()\nconst store = useStore()\nconst loading = ref(true)\nconst isWxLogin = ref(false)\nconst formState = reactive({\n  username: '',\n  password: '',\n  remember: true\n})\n\nonMounted(async () => {\n    console.log('ww', ww)\n    console.log('SDK_VERSION', ww.SDK_VERSION)\n    console.log('process.env.NODE_ENV', process.env.NODE_ENV)\n})\n\nconst localLoginTest = () => {\n    loginAfterHandle('eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MTMsImNvcnBfaWQiOiJ3dzVmNDMyYjNhMjRhOWI5ZjEiLCJleHAiOjE3MzE3NTUwOTF9.wYdz4Iq6IUIKLyz_yDepOINyzm2O5ohx-CjgE7cHKDE')\n}\n\nconst onChangeLogin = (type) => {\n    console.log(type)\n    if (type === 'wx') {\n        isWxLogin.value = true\n         // 验证是否完成企业初始化\n        checkCorpInit()\n    } else {\n        isWxLogin.value = false\n    }\n}\n\nconst onFinish = () => {\n  handleLogin()\n}\n\nconst handleLogin = () => {\n    loginByAccount({\n      username: formState.username,\n      password: formState.password\n    })\n    .then((res) => {\n        loginAfterHandle(res.data.token)\n    })\n    .catch((err) => {\n      console.log(err.message)\n    })\n}\n\nconst checkCorpInit = () => {\n    checkInit().then(res => {\n        if (res?.data?.init) {\n            let {corp_id, agent_id} = res.data\n            loginInit(corp_id, agent_id)\n            //TODO 本地环境直接登录（本地域名无法生成登录二维码）\n            process.env.NODE_ENV === 'development' && localLoginTest()\n        } else {\n            // 企业信息不存在\n            proxy.$message.warning('企业信息不存在，请先注册企业信息！')\n            setTimeout(() => {\n                router.push({path: '/authorizedAccess/index'})\n            }, 1000)\n        }\n    }).finally(() => {\n        loading.value = false\n    })\n}\n\nconst loginInit = async (corp_id, agent_id) => {\n    try {\n        const wwLogin = ww.createWWLoginPanel({\n            el: '#ww_login',\n            params: {\n                login_type: 'CorpApp',\n                appid: corp_id,\n                agentid: agent_id,\n                redirect_uri: window.location.origin,\n                state: 'loginState',\n                redirect_type: 'callback',\n            },\n            onCheckWeComLogin({isWeComLogin}) {\n                console.log(isWeComLogin)\n            },\n            onLoginSuccess({code}) {\n                console.log({code})\n                loginByCode({\n                    corp_id: corp_id,\n                    code,\n                }).then(res => {\n                    console.log('res', res)\n                    loginAfterHandle(res.data.token)\n                })\n            },\n            onLoginFail(err) {\n                console.log(err)\n            },\n        })\n    } catch (e) {\n        console.log(\"loginInit Err:\", e)\n        proxy.$message.error('初始化登录失败！')\n    }\n}\n\nconst loginAfterHandle = async token => {\n    try {\n        setAuthToken(token)\n        const userInfo = await getCurrentUser()\n        const corpInfo = await getCurrentCorp()\n        if (!userInfo.data || !corpInfo.data) {\n            proxy.$message.error('登录失败')\n            return\n        }\n        setUserInfo(userInfo.data)\n        setCookieAcrossSubdomain(JSON.stringify(userInfo.data))\n        setCorpInfo(corpInfo.data)\n        store.commit('setLoginInfo', userInfo.data)\n        store.commit('setCorpInfo', corpInfo.data)\n        proxy.$message.success('登录成功，正在跳转主页')\n        setTimeout(() => {\n            // chat_public_key_version > 0表示已经配置会话存档\n            // 否则去配置\n            if (corpInfo.data?.chat_public_key_version > 0) {\n                router.push({path: '/index'})\n            } else {\n                router.push({path: '/authorizedAccess/guide'})\n            }\n        }, 1000)\n    } catch (e) {\n        console.log('Err:', e)\n        proxy.$message.error('登录失败')\n    }\n}\n</script>\n\n<style scoped lang=\"less\">\n._main-container {\n    background: linear-gradient(254deg, #F6F9FE 6.01%, #E5EEFF 62.87%);\n    min-height: 100vh;\n    padding: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n\n    .main-content {\n        width: 960px;\n        height: 565px;\n        border-radius: 16px;\n        background: #FFF;\n        box-shadow: 0 4px 32px 0 #0000001f;\n        display: flex;\n\n        .left-box {\n            width: 480px;\n            flex-shrink: 0;\n\n            .cover {\n                width: 100%;\n                height: 100%;\n            }\n        }\n\n        .right-box {\n            position: relative;\n            flex: 1;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n\n            .right-icon-box {\n                display: flex;\n                align-items: center;\n                position: absolute;\n                right: 0;\n                top: 0;\n            }\n\n            .login-tip-top {\n                position: relative;\n                width: 142px;\n                height: 32px;\n                display: inline-flex;\n                padding: 4px 12px;\n                justify-content: center;\n                align-items: center;\n                gap: 10px;\n                border-radius: 6px;\n                background: var(--01-, #1D5EC9);\n                color: #ffffff;\n                font-size: 16px;\n                font-style: normal;\n                font-weight: 400;\n                line-height: 24px;\n\n                .login-tip-top-icon {\n                    position: absolute;\n                    width: 6px;\n                    right: -6px;\n                    top: 50%;\n                    margin-top: -6px;\n                }\n            }\n        }\n\n        .right-check {\n            width: 60px;\n            cursor: pointer;\n            display: inline-block;\n            margin: 8px;\n        }\n\n        .sign-in {\n            padding: 20px;\n            width: 382px;\n            height: 334px;\n            border-radius: 16px;\n            padding: 0px 20px;\n            font-family: \"PingFang SC\";\n\n            .login-title {\n                text-align: center;\n                color: #262626;\n                font-size: 24px;\n                font-style: normal;\n                font-weight: 600;\n                line-height: 32px;\n                margin-bottom: 56px;\n            }\n\n            .login-form {\n                font-weight: 700;\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: center;\n            }\n\n            .login-item {\n                display: flex;\n                width: 380px;\n                padding: 8px 12px;\n                height: 40px;\n                box-sizing: border-box;\n                align-items: center;\n                border-radius: 6px;\n                background: #FFF;\n                margin-bottom: 8px;\n\n                .login-input-icon {\n                    width: 16px;\n                    color: #8C8C8C;\n                }\n            }\n\n            .login-btn {\n                height: 40px;\n                box-sizing: border-box;\n                display: flex;\n                width: 380px;\n                padding: 8px 12px;\n                align-items: center;\n                justify-content: center;\n                border-radius: 6px;\n            }\n\n            .login-tip {\n                text-align: center;\n                color: #8c8c8c;\n                font-size: 14px;\n                font-style: normal;\n                font-weight: 400;\n                line-height: 22px;\n                margin-top: 10px;\n            }\n        }\n    }\n\n}\n</style>\n","import script from \"./login.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./login.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./login.vue?vue&type=style&index=0&id=1334afda&scoped=true&lang=less\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1334afda\"]])\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","adjustFooterPosition","contentHeight","document","body","scrollHeight","viewportHeight","window","innerHeight","footer","getElementById","classList","add","remove","onMounted","addEventListener","setTimeout","__exports__","__props","store","useStore","loginInfo","computed","getters","getUserInfo","style","background","logout","Modal","confirm","title","content","onOk","message","loading","destroy","logoutHandle","USER_INFO_KEY","Cookie","set","name","value","expire","cookie","encodeURIComponent","toUTCString","get","cookies","split","i","length","parts","trim","decodeURIComponent","setCookieAcrossSubdomains","days","domain","expires","date","Date","setTime","getTime","this","formatLocation","test","match","setCookieAcrossSubdomain","data","location","host","proxy","getCurrentInstance","router","useRouter","ref","isWxLogin","formState","reactive","username","password","remember","async","console","log","ww","SDK_VERSION","process","onChangeLogin","type","checkCorpInit","onFinish","handleLogin","loginByAccount","then","res","loginAfterHandle","token","catch","err","checkInit","init","corp_id","agent_id","loginInit","$message","warning","push","path","finally","createWWLoginPanel","el","params","login_type","appid","agentid","redirect_uri","origin","state","redirect_type","onCheckWeComLogin","isWeComLogin","onLoginSuccess","code","loginByCode","onLoginFail","e","error","setAuthToken","userInfo","getCurrentUser","corpInfo","getCurrentCorp","setUserInfo","JSON","stringify","setCorpInfo","commit","success","chat_public_key_version"],"sourceRoot":""}