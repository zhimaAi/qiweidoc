{"version":3,"file":"js/323.a274fd9a.js","mappings":"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","sources":["webpack://zmwk_session_archive/./node_modules/@ant-design/icons-svg/es/asn/SyncOutlined.js","webpack://zmwk_session_archive/./node_modules/@ant-design/icons-vue/es/icons/SyncOutlined.js","webpack://zmwk_session_archive/./src/api/company.js","webpack://zmwk_session_archive/./src/views/groupManagement/index.vue","webpack://zmwk_session_archive/./src/views/groupManagement/index.vue?6f3f"],"sourcesContent":["// This icon file is generated automatically.\nvar SyncOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z\" } }] }, \"name\": \"sync\", \"theme\": \"outlined\" };\nexport default SyncOutlined;\n","import { createVNode as _createVNode } from \"vue\";\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? Object(arguments[i]) : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport SyncOutlinedSvg from \"@ant-design/icons-svg/es/asn/SyncOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar SyncOutlined = function SyncOutlined(props, context) {\n  var p = _objectSpread({}, props, context.attrs);\n\n  return _createVNode(AntdIcon, _objectSpread({}, p, {\n    \"icon\": SyncOutlinedSvg\n  }), null);\n};\n\nSyncOutlined.displayName = 'SyncOutlined';\nSyncOutlined.inheritAttrs = false;\nexport default SyncOutlined;","import request from \"@/api/request\";\n\nexport const syncDepartmentStaff = () => {\n    return request.get('/api/department/sync')\n}\n\nexport const departmentList = () => {\n    return request.get('/api/department/list')\n}\n\nexport const staffList = (data) => {\n    return request.get('/api/staff/list', {params: data})\n}\n\nexport const groupsList = (data) => {\n    return request.get('/api/groups/list', {params: data})\n}\n\nexport const groupsSync = (data) => {\n    return request.get('/api/groups/sync', {params: data})\n}\n\nexport const customersList = (data) => {\n    return request.get('/api/customers/list', {params: data})\n}\n\nexport const customersSync = (data) => {\n    return request.get('/api/customers/sync', {params: data})\n}\n","<template>\n    <MainLayout title=\"群列表\">\n        <div class=\"filter-box\">\n            <div class=\"filter-item\">\n                <label>群名称：</label>\n                <div class=\"mr10\">\n                    <a-input\n                        ref=\"inputGroupNameRef\"\n                        style=\"width: 100%;\"\n                        placeholder=\"请输入客户群名称搜索\"\n                        allowClear\n                        @pressEnter=\"initSearch\"\n                        v-model:value=\"searchForm.name\"\n                    ></a-input>\n                </div>\n            </div>\n            <!-- <div class=\"filter-item\">\n                <label>群主：</label>\n                <div class=\"mr10\">\n                    <a-select\n                        style=\"width: 100%\"\n                        mode=\"multiple\"\n                        :maxTagCount=\"2\"\n                        placeholder=\"请选择群主\"\n                        :open=\"false\"\n                        allowClear\n                        @change=\"staffIdsChange\"\n                        v-model=\"staff_ids\"\n                        @dropdownVisibleChange=\"groupManageFocus\"\n                    >\n                        <a-select-option\n                            :value=\"item.user_id\"\n                            v-for=\"(item, index) in selectStaff\"\n                            :key=\"index\"\n                        >\n                        </a-select-option>\n                    </a-select>\n                </div>\n            </div>\n            <div class=\"filter-item\" style=\"justify-content: right;\">\n                <label>群标签：</label>\n                <div class=\"mr10\">\n                <a-popover placement=\"topLeft\">\n                    <template v-slot:content>\n                    <div v-if=\"filterTagParams.type === 3\">无标签</div>\n                    <div v-else-if=\"filterTagParams.type === 0 || filterTagParams.contain_tag_keys.length == 0\" class=\"zm-tip-info\">\n                        未选择标签\n                    </div>\n                    <div v-else>\n                        <div v-if=\"filterTagParams.contain_tag.length > 0\" class=\"mb16\">\n                        选择标签：\n                        <a-tag\n                            v-for=\"tag in filterTagParams.contain_tag_map\"\n                            :key=\"tag.key\"\n                            >{{ tag.label }}\n                        </a-tag>\n                        </div>\n                        <div v-if=\"filterTagParams.exclude_tag.length > 0\">\n                        排除标签：\n                        <a-tag\n                            v-for=\"tag in filterTagParams.exclude_tag_map\"\n                            :key=\"tag.key\"\n                            >{{ tag.label }}\n                        </a-tag>\n                        </div>\n                    </div>\n                    </template>\n                    <template v-slot:title></template>\n                    <a-select\n                        style=\"width: 100%\"\n                        mode=\"multiple\"\n                        readonly\n                        :placeholder=\"filterTagText()\"\n                        class=\"flex1 filter-tag-select\"\n                        :open=\"false\"\n                        :allowClear=\"true\"\n                        v-model=\"filterTagParams.contain_tag_keys\"\n                        :maxTagCount=\"3\"\n                        :maxTagTextLength=\"3\"\n                        @change=\"fileterTagChange\"\n                    >\n                    <a-select-option\n                        v-for=\"tag in filterTagParams.num_tag_list\"\n                        :key=\"tag.key\"\n                        :value=\"tag.key\"\n                    >\n                        {{ tag.label }}\n                    </a-select-option>\n                    </a-select>\n                </a-popover>\n                </div>\n            </div>\n            <div class=\"filter-item\">\n                <label>建群时间：</label>\n                <div>\n                <a-date-picker\n                    v-model=\"createGroupDates\"\n                    style=\"width: 100%\"\n                    format=\"YYYY-MM-DD\"\n                    :showToday=\"false\"\n                    @change=\"assignDate\"\n                />\n                </div>\n            </div>\n            <div class=\"filter-item\">\n                <label>排序条件：</label>\n                <div class=\"mr10\">\n                <a-select\n                    v-model=\"searchForm.sort\"\n                    style=\"width: 100%\"\n                    placeholder=\"请选择客户群标签搜索\"\n                    @change=\"sortChange\"\n                >\n                    <a-select-option :value=\"1\">群内总人数</a-select-option>\n                    <a-select-option :value=\"4\">创建时间</a-select-option>\n                </a-select>\n                </div>\n            </div>\n            <div class=\"filter-item\">\n                <label>群状态：</label>\n                <div class=\"mr10\">\n                <a-select\n                    v-model=\"searchForm.normal_status\"\n                    style=\"width: 100%\"\n                    placeholder=\"请选择群状态\"\n                    @change=\"initSearch\"\n                >\n                    <a-select-option :value=\"''\">全部</a-select-option>\n                    <a-select-option :value=\"1\">有效</a-select-option>\n                    <a-select-option :value=\"0\">异常</a-select-option>\n                </a-select>\n                </div>\n            </div> -->\n            <div class=\"filter-item\"></div>\n            <div class=\"filter-item\" style=\"justify-content: right\">\n                <a-button @click=\"initSearch\" type=\"primary\">搜索</a-button>\n                <a-button @click=\"resetSearch\" class=\"ml8\">重置</a-button>\n            </div>\n        </div>\n        <div class=\"container\">\n            <div class=\"left-block\">\n                <div class=\"header-box mt12\">\n                    <div class=\"zm-flex-between\">\n                        <div>群总数：<strong>{{ pagination.total }}</strong></div>\n                    </div>\n                    <a-tooltip overlayClassName=\"user-info-tooltip\">\n                        <template #title>\n                            <span>\n                                上次更新时间：<span class=\"num\">{{ last_sync_time || '暂无更新时间' }}</span>\n                            </span>\n                        </template>\n                        <a-button\n                            type=\"primary\"\n                            style=\"margin-left:20px;\"\n                            :icon=\"h(SyncOutlined)\"\n                            :loading=\"latest_info.success == false\"\n                            @click=\"pullCustomerGroup\"\n                        >\n                        更新数据\n                        </a-button>\n                    </a-tooltip>\n                </div>\n                <a-table\n                    class=\"mt16\"\n                    :loading=\"loading\"\n                    :data-source=\"list\"\n                    :columns=\"columns\"\n                    :pagination=\"pagination\"\n                    @change=\"tableChange\"\n                >\n                    <template #bodyCell=\"{ column, text, record }\">\n                        <template v-if=\"'name' === column.dataIndex\">\n                            <div class=\"zm-user-info\">\n                                <img class=\"avatar\" src=\"@/assets/default-avatar.png\"/>\n                                <span class=\"name\">{{ record.name }}</span>\n                            </div>\n                        </template>\n                        <template v-if=\"'group_create_time' === column.dataIndex\">\n                            <div class=\"create_time\">{{ record.group_create_time }}</div>\n                        </template>\n                        <!-- <template v-if=\"'btns' === column.dataIndex\">\n                            <a-popover\n                                placement=\"left\"\n                                @visibleChange=\"visiblePopoverChange($event, scope.row)\"\n                            >\n                                <template #content>\n                                <div class=\"group-enter-popup\">\n                                    <span>请使用企业微信扫描下方二维码，</span>\n                                    <span>可快速进群修改群名称</span>\n                                    <img\n                                    v-if=\"groupEnterUrl\"\n                                    :src=\"groupEnterUrl\"\n                                    style=\"width: 120px;height: 128px;\"\n                                    />\n                                </div>\n                                </template>\n                                <a class=\"mr16 height-automatic eli-one-text\">扫码进群</a>\n                            </a-popover>\n                        </template> -->\n                    </template>\n                </a-table>\n            </div>\n        </div>\n        <!-- <selectStaffNew\n            selectType=\"multiple\"\n            title=\"选择所属员工\"\n            ref=\"setStaffRef\"\n            @change=\"selectStaffChange\"\n        >\n        </selectStaffNew> -->\n    </MainLayout>\n</template>\n\n<script setup>\nimport { onMounted, ref, reactive, h } from 'vue';\nimport { message } from 'ant-design-vue';\n// import selectStaffNew from \"@/components/select-staff-new/index\";\nimport {SyncOutlined} from '@ant-design/icons-vue';\nimport MainLayout from \"@/components/mainLayout.vue\";\nimport { groupsList, groupsSync } from \"@/api/company\";\nimport { formatDate } from \"@/utils/tools.js\"\n// import jrQrcode from \"jr-qrcode\";\n\n// const setStaffRef = ref(null)\nconst inputGroupNameRef = ref(null)\nconst searchForm = reactive({\n    size: 20,\n    page: 1,\n    name: \"\",\n    member_name: \"\",\n    tagNames: [],\n    remark_yes: -1,\n    sort: 1,\n    normal_status: '',\n})\n\nconst filterTagParams = reactive({\n    type: 0,\n    contain_tag: [],\n    contain_tag_keys: [],\n    contain_tag_map: [],\n    exclude_tag: [],\n    exclude_tag_map: []\n})\n\nconst columns = [\n    {\n        title: '群名',\n        dataIndex: 'name',\n        scopedSlots: { customRender: 'name' },\n        minWidth: '200',\n        ellipsis: true,\n        sort_key: 'name',\n    },\n    {\n        title: '群主',\n        dataIndex: 'owner_name',\n        scopedSlots: { customRender: 'owner_name_slot' },\n        minWidth: '140',\n        sort_key: 'owner_name',\n    },\n    {\n        dataIndex: 'total_member',\n        title: '群人数',\n        minWidth: '65',\n        scopedSlots: { customRender: 'total_member' },\n        sort_key: 'total_member',\n    },\n    // {\n    //     title: '同步标签',\n    //     dataIndex: 'xkf_tag_dec',\n    //     minWidth: '100',\n    //     scopedSlots: { customRender: 'syncTag' },\n    //     sort_key: 'xkf_tag_dec',\n    // },\n    // {\n    //     title: '可见范围',\n    //     dataIndex: 'status',\n    //     minWidth: '75',\n    //     scopedSlots: { customRender: 'status' },\n    //     sort_key: 'status',\n    // },\n    {\n        dataIndex: 'group_create_time',\n        scopedSlots: { customRender: 'group_create_time' },\n        title: '创建时间',\n        minWidth: '120',\n        sort_key: 'group_create_time',\n    }\n    // ,\n    // {\n    //     dataIndex: 'btns',\n    //     title: '操作',\n    //     renderHeader: true,\n    //     scopedSlots: { customRender: 'btns' },\n    //     minWidth: '250',\n    //     fixed: 'right',\n    //     sort_key: 'play_key'\n    // }\n]\n\nconst createGroupDates = ref('')\nconst loading = ref(false)\nconst list = ref([])\nconst pagination = reactive({\n    total: 0,\n    current: 1,\n    pageSize: 10,\n    showSizeChanger: true,\n    pageSizeOptions: ['10', '20', '50', '100'],\n})\nconst filterData = reactive({\n    keyword: '',\n})\n\nconst staff_ids = ref([])\n// const selectStaff = ref([])\n// const staffIdsChange = () => {\n//     let arr = [];\n//     let staffs = [];\n//     staff_ids.value.forEach((i) => {\n//     selectStaff.value.forEach((it) => {\n//         if (i === it.user_id) {\n//         arr.push(it.staff_id);\n//         staffs.push(it);\n//         }\n//     });\n//     });\n//     searchForm.staff_id = arr.join(\",\");\n//     selectStaff.value = staffs;\n// }\n\n// const groupManageFocus = () => {\n//     if (setStaffRef.value) {\n//         setStaffRef.value.show(selectStaff.value)\n//     }\n// }\n\n//选中员工逻辑\n// const selectStaffChange = (val) => {\n//     selectStaff.value = val;\n//     staff_ids.value = val.map((item) => item.user_id);\n//     searchForm.staff_id = val.map((item) => item.staff_id).toString();\n// }\n\n// const filterTagText = () => {\n//     if(filterTagParams.contain_tag_keys.length == 0){\n//         return \"请选择客户群标签搜索\";\n//     }\n//     switch (filterTagParams.type) {\n//         case 0:\n//         return \"请选择客户群标签\";\n//         case 1:\n//         return \"满足任意一个群标签\";\n//         case 2:\n//         return \"同时满足所选群标签\";\n//         case 3:\n//         return \"无群标签\";\n//     }\n// }\n\n// const fileterTagChange = (val) => {\n//     if(val.length == 0){\n//         filterTagParams.contain_tag_keys = []\n//         filterTagParams.num_tag_list = []\n//         filterTagParams.contain_tag_map = []\n//         filterTagParams.exclude_tag_map = []\n//         filterTagParams.contain_tag = []\n//         filterTagParams.exclude_tag = []\n//         return\n//     }\n\n//     filterTagParams.contain_tag_keys = val\n//     // 当前删除的tag\n//     let del_tag = filterTagParams.num_tag_list.filter(sub=> !val.includes(sub.key))\n//     // 更新当前显示的数据\n//     filterTagParams.num_tag_list = filterTagParams.num_tag_list.filter(sub=> val.includes(sub.key))\n//     // 过滤掉已经删除的\n//     filterTagParams.contain_tag_map = filterTagParams.contain_tag_map.filter(sub=> !sub.key.includes(del_tag[0].key))\n//     filterTagParams.exclude_tag_map = filterTagParams.exclude_tag_map.filter(sub=> !sub.key.includes(del_tag[0].key))\n//     // 重新赋值keys\n//     filterTagParams.contain_tag = filterTagParams.contain_tag_map.map(sub=> sub.key)\n//     filterTagParams.exclude_tag = filterTagParams.exclude_tag_map.map(sub=> sub.key)\n// }\n\n// const rowSelection = ref({\n//   checkStrictly: false,\n//   onChange: (selectedRowKeys, selectedRows) => {\n//     console.log(`selectedRowKeys: ${selectedRowKeys}`, 'selectedRows: ', selectedRows);\n//   },\n//   onSelect: (record, selected, selectedRows) => {\n//     console.log(record, selected, selectedRows);\n//   },\n//   onSelectAll: (selected, selectedRows, changeRows) => {\n//     console.log(selected, selectedRows, changeRows);\n//   },\n// });\n\n// const groupEnterUrl = ref('')\n// const visiblePopoverChange = (e, record) => {\n//     if(e){\n//         // let data = {\n//         //     group_id: record.chat_id,\n//         //     group_name:record.name\n//         // }\n//         // getGroupEnterLink(data).then((res) => {\n//         //     groupEnterUrl.value = jrQrcode.getQrBase64(res.data.url);\n//         // })\n//     }\n// }\n\nonMounted(() => {\n    loadData()\n})\n\nconst last_sync_time = ref('')\nconst refreshFlag = ref(false)\nconst latest_info = reactive({\n    end_time: void 0,\n    success: true\n})\nconst pullCustomerGroup = () => {\n    if (!refreshFlag.value) {\n        refreshFlag.value = true;\n        latest_info.success = false;\n        groupsSync({}).then((res) => {\n            console.log('rea1', res)\n            //已经在拉取的状态\n            refreshFlag.value = false;\n            latest_info.success = true;\n            message.success('更新成功')\n            // checkTaskStatus();\n        });\n    }\n}\n\n// const assignDate = (value, date) => {\n//     searchForm.start_time = date;\n//     searchForm.end_time = date;\n// }\n\nconst lastGetTime = ref(0)\n\nconst initSearch = () => {\n    lastGetTime.value = new Date().getTime() / 1000;\n    searchForm.page = 1;\n    search();\n}\n\nconst resetSearch = () => {\n    filterTagParams.type = 0\n    filterTagParams.contain_tag = []\n    filterTagParams.contain_tag_keys = []\n    filterTagParams.contain_tag_map = []\n    filterTagParams.exclude_tag = []\n    filterTagParams.exclude_tag_map = []\n    staff_ids.value = [];\n    createGroupDates.value = \"\";\n    searchForm.name = \"\"\n    initSearch();\n}\n\n// const sortChange = () => {\n\n// }\n\nconst search = () => {\n    list.value = []\n    pagination.total = 1\n    pagination.current = 1\n    loadData()\n}\n\nconst loadData = () => {\n    loading.value = true\n    console.log(searchForm)\n    let params = {\n        page: pagination.current,\n        size: pagination.pageSize,\n        keyword: searchForm.name\n    }\n    filterData.keyword = filterData.keyword.trim()\n    if (filterData.keyword) {\n        params.keyword = filterData.keyword\n    }\n    groupsList(params).then(res => {\n        console.log('res', res)\n        list.value = res.data.items || []\n        last_sync_time.value = res.data.last_sync_time || ''\n        pagination.total = Number(res.data.total)\n    }).finally(() => {\n        loading.value = false\n    })\n}\n\nconst tableChange = p => {\n    pagination.current = p.current\n    pagination.pageSize = p.pageSize\n    loadData()\n}\n</script>\n\n<style scoped lang=\"less\">\n.container {\n    display: flex;\n    margin: 12px;\n\n    > div {\n        background: #FFF;\n        border-radius: 2px;\n        // overflow-y: scroll;\n        // height: calc(100vh - 250px);\n    }\n\n    .left-block {\n        padding: 12px;\n        flex: 1;\n    }\n\n    .right-block {\n        flex-shrink: 0;\n        width: 16vw;\n        max-width: 300px;\n\n        :deep(.ant-tabs) {\n            .ant-tabs-tab {\n                margin: 0 12px;\n            }\n\n            .ant-tabs-content {\n                padding: 0 12px;\n            }\n        }\n    }\n}\n\n.filter-box {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  padding: 16px 24px 0;\n  background-color: white;\n  margin: 12px;\n\n  .mr10{\n    margin-right: 10px;\n  }\n  .filter-item {\n    margin-bottom: 16px;\n    display: flex;\n    align-items: center;\n    width: 25%;\n    flex-shrink: 0;\n\n    > div {\n      width: calc(100% - 70px);\n    }\n\n    label {\n      white-space: nowrap;\n      display: inline-block;\n      width: 70px;\n      flex-shrink: 0;\n      text-align: right;\n    }\n  }\n}\n\n.header-box {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.scan-code-group {\n    color: #2475fc;\n    cursor: pointer;\n}\n</style>\n\n<style lang=\"less\">\n.user-info-tooltip .ant-tooltip-inner {\n    width: max-content;\n    white-space: nowrap;\n}\n</style>\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=c7ee14d4&scoped=true&lang=less\"\nimport \"./index.vue?vue&type=style&index=1&id=c7ee14d4&lang=less\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c7ee14d4\"]])\n\nexport default __exports__"],"names":["SyncOutlined","_objectSpread","target","i","arguments","length","source","Object","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","value","defineProperty","configurable","writable","props","context","p","attrs","_createVNode","AntdIcon","SyncOutlinedSvg","displayName","inheritAttrs","syncDepartmentStaff","request","get","departmentList","staffList","data","params","groupsList","groupsSync","customersList","customersSync","inputGroupNameRef","ref","searchForm","reactive","size","page","name","member_name","tagNames","remark_yes","sort","normal_status","filterTagParams","type","contain_tag","contain_tag_keys","contain_tag_map","exclude_tag","exclude_tag_map","columns","title","dataIndex","scopedSlots","customRender","minWidth","ellipsis","sort_key","createGroupDates","loading","list","pagination","total","current","pageSize","showSizeChanger","pageSizeOptions","filterData","keyword","staff_ids","onMounted","loadData","last_sync_time","refreshFlag","latest_info","end_time","success","pullCustomerGroup","then","res","console","log","message","lastGetTime","initSearch","Date","getTime","search","resetSearch","trim","items","Number","finally","tableChange","__exports__"],"sourceRoot":""}